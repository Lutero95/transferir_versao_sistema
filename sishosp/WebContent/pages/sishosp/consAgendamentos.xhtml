<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="../../template/template.xhtml">


	<f:metadata>
		<f:viewAction
			action="#{AgendaController.resetaParametrosConsultaAgenda()}" />
			
	</f:metadata>

	<style type="text/css">
    .presenca {
        background-color: #fca752 !important;
        background-image: none !important;
        color: #000000 !important;
    }
</style>

	<ui:define name="content">


		<div class="panel panel-primary top-primary">
			<div class="panel-heading top-heading">
				<h4 class="panel-title">Consultar Agendamentos</h4>
			</div>

			<div class="panel-body table-body">


				<h:form id="formConsAge">

					<b:row>
						<p:outputPanel class="data-size5">
							<b:column span="1" class="label-position data-size">
								<b:label value="Data da Marcação:" severity="info" />

								<p:calendar pattern="dd/MM/yyyy" mask="true" navigator="true"
									showOn="button" size="7" class="select-agendaEquipe2"
									value="#{AgendaController.dataAtendimentoC}" />
							</b:column>


							<b:column span="1" class="data-size4">
								<p:outputLabel id="outdataa">
									<h:outputLabel value="a" />
								</p:outputLabel>
							</b:column>

							<b:column span="1" class="label-position data-size3">
								<p:calendar pattern="dd/MM/yyyy" mask="true" navigator="true"
									class="select-agendaEquipe2" showOn="button" size="7"
									id="dtagen3" locale="pt"
									value="#{AgendaController.dataAtendimentoFinalC}">

								</p:calendar>
							</b:column>
						</p:outputPanel>

						<p:outputPanel>
							<b:column span="2" class="new-data-size3"
								style="width: 100px !important">

								<p:outputLabel value="Situação:"
									style="margin-top: 8px;color:#2e84ce;">
								</p:outputLabel>

							</b:column>

							<b:column span="3" class="btn-radio-table2 width-radio">
								<p:selectOneRadio required="true" style="margin-top: 10px"
									requiredMessage="Escolha a situação!"
									value="#{AgendaController.agenda.presenca}">
									<f:selectItem itemLabel="Todos" itemValue="T" />
									<f:selectItem itemLabel="Com Presença" itemValue="S" />
									<f:selectItem itemLabel="Sem Presença" itemValue="N" />
								</p:selectOneRadio>
							</b:column>
						</p:outputPanel>

					</b:row>
					<b:row>



						<br></br>
						<b:column span="3">

							<p:panelGrid columns="2">

								<p:selectOneMenu value="#{AgendaController.tipoBusca}"
									style="margin-top: -13px">
									<f:selectItem itemLabel="Nome" itemValue="nome" />
									<f:selectItem itemLabel="Prontuário" itemValue="prontuario" />
									<f:selectItem itemLabel="Matrícula" itemValue="matricula" />
									<f:selectItem itemLabel="CPF" itemValue="cpf" />
									<f:selectItem itemLabel="CNS" itemValue="cns" />
								</p:selectOneMenu>

								<p:inputText value="#{AgendaController.campoBusca}"
									placeholder="Digite aqui a busca" style="margin-left: 10px;" />


							</p:panelGrid>
						</b:column>

						<b:column span="2" class="col-md-2-new new-span1"
							style="margin-bottom:10px;">

							<b:commandButton value="Buscar" icon="glyphicon-search"
								class="btn-acao-table acao-buscar"
								action="#{AgendaController.consultarAgenda(AgendaController.agenda.presenca)}"
								update=":formConsAge msgPagina"></b:commandButton>

						</b:column>

						<b:column span="2" class="new-span1">

							<b:commandButton value="Limpar" icon="glyphicon-trash"
								class="btn-acao-table acao-limpar2"
								action="#{GerenciarPacienteController.limparBusca()}"
								update=":formConsAge"></b:commandButton>
						</b:column>

					</b:row>

					<b:row class="table-border">

						<div align="center">

							<b:column span="2" class="new-span2">
								<b:commandButton value="Marcar Presença" style="margin-top:5px;"
									id="btnmarca" immediate="true"
									rendered="#{AgendaController.rowBean.presenca=='N'}"
									class="btn-acao-table acao-confirmar btn-new-padding2"
									update=":formConsAge" icon="glyphicon-check"
									action="#{AgendaController.mudaStatusPresenca(AgendaController.rowBean)}" />
								<b:commandButton value="Retirar Presença"
									style="margin-top:5px;" id="btnretira" immediate="true"
									rendered="#{AgendaController.rowBean.presenca=='S'}"
									class="btn-acao-table acao-cancelar btn-new-padding2"
									update=":formConsAge" icon="glyphicon-remove"
									action="#{AgendaController.mudaStatusPresenca(AgendaController.rowBean)}" />
							</b:column>



						</div>

					</b:row>

					<br />

					<p:dataTable emptyMessage="Nenhum Paciente" responsive="true"
					rowStyleClass="#{agenda.presenca=='S' ? 'presenca' : null}"
						styleClass="table table-hover" id="dtConsultas"
						value="#{AgendaController.listaConsulta}" var="agenda"
						paginator="true" paginatorPosition="bottom" rows="12"
						resizableColumns="true" selectionMode="single"
						selection="#{AgendaController.rowBean}"
						rowKey="#{agenda.idAgenda}">



						<p:ajax event="rowSelect" update=":formConsAge" />

						<p:column width="6%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Presença" />
							</f:facet>
							<h:outputText value="SIM" rendered="#{agenda.presenca=='S'}" />
							<h:outputText value="NÃO" rendered="#{agenda.presenca=='N'}" />


						</p:column>

						<p:column width="5%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Data" />
							</f:facet>
							<h:outputText value="#{agenda.dataAtendimento}">
								<f:convertDateTime pattern="dd/MM/yyyy"  />
							</h:outputText>
						</p:column>
						
						<p:column width="5%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Turno" />
							</f:facet>
							<h:outputText value="TARDE" rendered="#{agenda.turno=='T'}"/>
							<h:outputText value="MANHÃ" rendered="#{agenda.turno=='M'}"/>
								
							
						</p:column>						

						<p:column width="20%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Paciente" />
							</f:facet>
							<h:outputText value="#{agenda.paciente.nome}"></h:outputText>
						</p:column>

						<p:column width="10%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="CNS" />
							</f:facet>
							<h:outputText value="#{agenda.paciente.cns}"></h:outputText>
						</p:column>

						<p:column width="20%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;"
									value="Tipo de Atendimento" />
							</f:facet>
							<h:outputText value="#{agenda.tipoAt.descTipoAt}"></h:outputText>
						</p:column>

						<p:column width="15%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Equipe" />
							</f:facet>
							<h:outputText value="#{agenda.equipe.descEquipe}"></h:outputText>
						</p:column>

						<p:column width="20%">
							<f:facet name="header">
								<h:outputText style="font-size: 14px;" value="Profissional" />
							</f:facet>
							<h:outputText value="#{agenda.profissional.nome}"></h:outputText>
						</p:column>



					</p:dataTable>



					<br></br>



				</h:form>
			</div>
		</div>

	</ui:define>
</ui:composition>