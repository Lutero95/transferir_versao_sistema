<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="../../template/templatepagsistemas.xhtml">

	<ui:define name="body">

		<div class="col-md-8">
			<h3>Agenda Médica</h3>
			<br />
		</div>

		<h:form id="formAgendaMedica">
			<p:panel>
				<p:panelGrid columns="3" styleClass="semBorda">
					<h:outputLabel for="pac" value="Paciente" />
					<p:outputPanel id="outPacie">
						<p:inputText id="codPac"
							value="#{AgendaController.paciente.id_paciente}" readonly="true"
							style="width: 40px" />
						<p:inputText id="pac" value="#{AgendaController.paciente.nome}"
							readonly="true" style="width: 300px" />
					</p:outputPanel>
					<p:commandButton id="btBusPa" value="Buscar"
						onclick="PF('dlgConsuPac').show();" />

					<h:outputLabel for="prog" value="Programa" />
					<p:outputPanel id="outProg">
						<p:inputText id="codProg"
							value="#{AgendaController.programa.idPrograma}" readonly="true"
							style="width: 40px" />
						<p:inputText id="prog"
							value="#{AgendaController.programa.descPrograma}" readonly="true"
							style="width: 300px" />
					</p:outputPanel>
					<p:commandButton id="btBusPr" value="Buscar"
						disabled="#{AgendaController.paciente==null}"
						onclick="PF('dlgConsuProg').show();" />

					<h:outputLabel for="grupo" value="Grupo" />
					<p:outputPanel id="outGrupo">
						<p:inputText id="codGrupo"
							value="#{AgendaController.grupo.idGrupo}" readonly="true"
							style="width: 40px" />
						<p:inputText id="grupo"
							value="#{AgendaController.grupo.descGrupo}" readonly="true"
							style="width: 300px" />
					</p:outputPanel>
					<p:commandButton id="btBusGr" value="Buscar"
						disabled="#{AgendaController.programa==null}"
						onclick="PF('dlgConsuGrop').show();" />

					<h:outputLabel for="tipoAt" value="Tipo At." />
					<p:outputPanel id="outTipoAt">
						<p:inputText id="codTipo"
							value="#{AgendaController.tipoAt.idTipo}" readonly="true"
							style="width: 40px" />
						<p:inputText id="tipoAt"
							value="#{AgendaController.tipoAt.descTipoAt}" readonly="true"
							style="width: 300px" />
					</p:outputPanel>
					<p:commandButton id="btBusTi" value="Buscar"
						disabled="#{AgendaController.grupo==null}"
						onclick="PF('dlgConsuTipoAt').show();" />
				</p:panelGrid>

				<p:panelGrid columns="2" styleClass="semBorda">
					<h:outputLabel for="obs" value="Obs.:" />
					<p:inputTextarea id="obs" value="obs" style="width: 328px"
						autoResize="false" />
				</p:panelGrid>

				<p:panelGrid columns="7" styleClass="semBorda">
					<p:outputPanel>
						<h:outputLabel for="dataAte" value="Data para Atendimento" />
						<br />
						<p:calendar id="data" locale="pt" navigator="true" mask="true"
							pattern="dd/MM/yyyy" />
					</p:outputPanel>

					<p:outputPanel>
						<h:outputLabel for="turno" value="Turno" />
						<br />
						<p:selectOneMenu value="#">
							<f:selectItem itemLabel="Manhã" itemValue="MANHÃ" />
							<f:selectItem itemLabel="Tarde" itemValue="TARDE" />
						</p:selectOneMenu>
					</p:outputPanel>

					<p:commandButton value="Ver agenda" style="margin-top: 25px;" />

					<p:outputPanel>
						<h:outputLabel for="qtd" value="Qtd." />
						<br />
						<p:inputText id="qtd" value="qtd" style="width: 40px" />
					</p:outputPanel>

					<p:outputPanel>
						<h:outputLabel for="max" value="Máx." />
						<br />
						<p:inputText id="max" value="max" style="width: 40px" />
					</p:outputPanel>

					<p:commandButton value="Confirmar" style="margin-top: 25px;" />

					<p:commandButton value="Limpar Busca" style="margin-top: 25px;"
						actionListener="#{AgendaController.limparDados()}"
						update=":formAgendaMedica" />
				</p:panelGrid>

				<p:panelGrid columns="1" styleClass="semBorda">
					<h:outputLabel for="novoAg" value="Novo(s) Agendamento(s)" />
					<p:dataTable value="#" resizableColumns="true">
						<p:column headerText="Data">
						</p:column>

						<p:column headerText="Turno">
						</p:column>

						<p:column headerText="Cód. Tipo Atend.">
						</p:column>

						<p:column headerText="Tipo de Atendimento">
						</p:column>

						<p:column headerText="Obs.">
						</p:column>
					</p:dataTable>

					<h:outputLabel for="agendData" value="Agendados na Data" />
					<p:dataTable value="#" resizableColumns="true">
						<p:column headerText="Cod.">
						</p:column>

						<p:column headerText="Data">
						</p:column>

						<p:column headerText="Horário">
						</p:column>

						<p:column headerText="Pront.">
						</p:column>

						<p:column headerText="Paciente">
						</p:column>

						<p:column headerText="TIPO">
						</p:column>
					</p:dataTable>
				</p:panelGrid>

				<center>
					<p:panelGrid columns="4" styleClass="semBorda">
						
						<p:commandButton value="Gravar" icon="confirmar"
							disabled="#{!AgendaController.prontoGravar}" />
						
						<p:commandButton value="Consultar" icon="buscar" />
						
						<p:commandButton value="Limpar" icon="limpar"
							actionListener="#{AgendaController.limparDados()}"
							update=":formAgendaMedica" />
						
						<p:commandButton value="Sair" icon="btlogout"
							update=":formAgendaMedica"
							actionListener="#{AgendaController.limparDados()}"
							action="/pages/comum/selecaoSistema.faces" />
					</p:panelGrid>
				</center>
			</p:panel>
		</h:form>


		<p:dialog header="Consulta Pacientes" widgetVar="dlgConsuPac"
			modal="true" width="750px">
			<h:form id="formConsuPac">
				<p:growl id="msgC" />
				<center>
					<p:panelGrid columns="2" styleClass="semBorda">
						<p:outputPanel id="outOp">
							<h:outputLabel for="op" value="Opção" />
							<br />
							<p:selectOneMenu id="op" value="#{PacienteController.tipoBuscar}">
								<f:selectItem itemLabel="Escolha Opção" itemValue="VAZIO" />
								<f:selectItem itemLabel="CPF" itemValue="CPF" />
								<f:selectItem itemLabel="Nome" itemValue="NOME" />
								<f:selectItem itemLabel="Prontuário Velho"
									itemValue="PRONTVELHO" />
								<f:selectItem itemLabel="Prontuário Novo" itemValue="PRONTNOVO" />
							</p:selectOneMenu>
						</p:outputPanel>

						<p:outputPanel id="outDesP">
							<h:outputLabel for="descPac" value="Descrição" />
							<br />
							<p:inputText id="descPac"
								value="#{PacienteController.descricaoParaBuscar}"
								style="width: 300px" />
						</p:outputPanel>
					</p:panelGrid>

					<p:separator style="margin-top: 10px;" />

					<p:panelGrid columns="3" styleClass="semBorda">
						<p:commandButton value="OK" icon="ui-icon-check"
							action="#{PacienteController.buscarPaciente()}"
							update=":formConsuPac:msgC, :formConsuPac:dtPaci" />
						<p:commandButton value="Nova Consulta" icon="ui-icon-search"
							actionListener="#{PacienteController.limparDados()}"
							update=":formConsuPac:outOp, :formConsuPac:outDesP, :formConsuPac:dtPaci" />
						<p:commandButton value="Sair" icon="ui-icon-close" />
					</p:panelGrid>
				</center>
				<p:dataTable resizableColumns="true" id="dtPaci"
					value="#{PacienteController.listaPacientesParaAgenda}" var="pacie"
					emptyMessage="Faça uma busca de paciente!">
					<p:column headerText="PRONTUÁRIO">
						<p:outputLabel value="#{pacie.id_paciente}" />
					</p:column>

					<p:column headerText="PRONT ANT.">
						<p:outputLabel value="#{pacie.protant}" />
					</p:column>

					<p:column headerText="NOME">
						<p:outputLabel value="#{pacie.nome}" />
					</p:column>

					<p:column headerText="CPF">
						<p:outputLabel value="#{pacie.cpf}" />
					</p:column>
					<p:column style="width:50px;text-align: center">
						<p:commandButton
							update=":formAgendaMedica:outPacie, :formAgendaMedica:btBusPr"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsuPac').hide();">
							<f:setPropertyActionListener value="#{pacie}"
								target="#{AgendaController.paciente}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Programa" widgetVar="dlgConsuProg"
			modal="true" width="500px">
			<h:form id="formConsuProg">
				<p:dataTable value="#{ProgramaController.listaProgramas}" var="prog"
					resizableColumns="true"
					emptyMessage="Não existe nenhum programa cadastrado!">
					<p:column headerText="CÓD.">
						<p:outputLabel value="#{prog.idPrograma}" />
					</p:column>
					<p:column headerText="PROGRAMA">
						<p:outputLabel value="#{prog.descPrograma}" />
					</p:column>
					<p:column style="width:50px;text-align: center">
						<p:commandButton
							update=":formAgendaMedica:outProg, :formConsuGrop:dtGrupo, :formAgendaMedica:btBusGr"
							icon="ui-icon-check" title="Selecionar"
							action="#{GrupoController.atualizaLista(AgendaController.programa)}"
							onclick="PF('dlgConsuProg').hide();">
							<f:setPropertyActionListener value="#{prog}"
								target="#{AgendaController.programa}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Grupo" widgetVar="dlgConsuGrop"
			modal="true" width="550px">
			<h:form id="formConsuGrop">
				<p:dataTable value="#{GrupoController.listaGruposProgramas}"
					id="dtGrupo" resizableColumns="true" var="grupo"
					emptyMessage="Não existe nenhum grupo cadastrado!">
					<p:column headerText="CÓD.">
						<p:outputLabel value="#{grupo.idGrupo}" />
					</p:column>
					<p:column headerText="GRUPO">
						<p:outputLabel value="#{grupo.descGrupo}" />
					</p:column>
					<p:column headerText="QTD. FREQ>">
						<p:outputLabel value="#{grupo.qtdFrequencia}" />
					</p:column>

					<p:column style="width:50px;text-align: center">
						<p:commandButton
							update=":formAgendaMedica:outGrupo, :formConsuTipoAt:dtTipoAt, :formAgendaMedica:btBusTi"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsuGrop').hide();"
							action="#{TipoAtendimentoController.atualizaListaTipos(AgendaController.grupo)}">
							<f:setPropertyActionListener value="#{grupo}"
								target="#{AgendaController.grupo}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Tipos de Atendimento"
			widgetVar="dlgConsuTipoAt" modal="true" width="550px">
			<h:form id="formConsuTipoAt">
				<p:dataTable value="#{TipoAtendimentoController.listaTipos}"
					id="dtTipoAt" resizableColumns="true" var="tipo"
					emptyMessage="Não existe nenhum tipo cadastrado!">
					<p:column headerText="CÓD.">
						<p:outputLabel value="#{tipo.idTipo}" />
					</p:column>
					<p:column headerText="Tipo de Atendimento">
						<p:outputLabel value="#{tipo.descTipoAt}" />
					</p:column>

					<p:column style="width:50px;text-align: center">
						<p:commandButton update=":formAgendaMedica:outTipoAt"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsuTipoAt').hide();">
							<f:setPropertyActionListener value="#{tipo}"
								target="#{AgendaController.tipoAt}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>