<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../../template/template.xhtml">
    <f:metadata>
        <f:viewAction action="#{ProcedimentoController.getEditProcedimento()}"/>
    </f:metadata>
    <ui:define name="body">

        <h:form class="form-horizontal" id="frmCadProc">
            <div class="panel-body">
                <div class="sub-header">
                    <h:outputText value="#{ProcedimentoController.cabecalho}"
                                  styleClass="cadcabecalho"></h:outputText>
                    <hr/>
                </div>


                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="Descrição:" style="margin-top:10px"/>
                    </b:column>

                    <b:column span="5">
                        <b:inputText value="#{ProcedimentoController.proc.nomeProc}"
                                     required="true" requiredMessage="Informe a Descrição"
                                     validatorMessage="Descrição deve conter entre 2 e 30 caracteres."
                                     id="incod">
                            <f:validateLength minimum="2" maximum="40"/>
                        </b:inputText>
                    </b:column>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">

                        <h:outputLabel value="Código:" style="margin-top:10px"/>

                    </b:column>

                    <b:column span="5">

                        <b:inputText value="#{ProcedimentoController.proc.codProc}"
                                     required="true" requiredMessage="Informe o Código"/>
                    </b:column>

                </b:row>

                <b:row>

                    <b:column span="1">

                        <h:outputLabel value="Idade Mínima:" style="margin-top:10px"/>

                    </b:column>

                    <b:column span="2">

                        <b:inputText value="#{ProcedimentoController.proc.idadeMinima}"
                                     required="true" requiredMessage="Informe a idade mínima"/>
                    </b:column>

                    <b:column span="1">

                        <h:outputLabel value="Idade Máxima:" style="margin-top:10px"/>

                    </b:column>

                    <b:column span="2">

                        <b:inputText value="#{ProcedimentoController.proc.idadeMaxima}"
                                     required="true" requiredMessage="Informe a idade máxima"/>
                    </b:column>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">

                        <h:outputLabel value="Quantidade Máxima:" style="margin-top:10px"/>

                    </b:column>

                    <b:column span="2">

                        <b:inputText value="#{ProcedimentoController.proc.qtdMaxima}"
                                     required="true"
                                     requiredMessage="Informe a idade quantidade máxima em meses"/>
                    </b:column>

                    <b:column span="1">

                        <h:outputLabel value="Prazo mínimo:" style="margin-top:10px"/>

                    </b:column>

                    <b:column span="2">

                        <b:inputText
                                value="#{ProcedimentoController.proc.prazoMinimoNovaExecucao}"
                                required="true"
                                requiredMessage="Informe o prazo mínimo para nova execução"/>
                    </b:column>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">

                        <h:outputLabel value="Sexo para procedimento:"/>

                    </b:column>

                    <b:column span="2">
                        <p:selectOneRadio value="#{ProcedimentoController.proc.sexo}"
                                          required="true"
                                          requiredMessage="Escolha o sexo que será permitido esse procedimento">
                            <f:selectItem itemLabel="Masculino" itemValue="M"/>
                            <f:selectItem itemLabel="Feminino" itemValue="F"/>
                            <f:selectItem itemLabel="Ambos" itemValue="A"/>
                        </p:selectOneRadio>
                    </b:column>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="Utiliza Equipamento"/>
                    </b:column>

                    <b:column span="1">
                        <p:selectBooleanCheckbox
                                value="#{ProcedimentoController.proc.utilizaEquipamento}"/>
                    </b:column>

                </b:row>


                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="Auditivo"/>
                    </b:column>

                    <b:column span="1">
                        <p:selectBooleanCheckbox
                                value="#{ProcedimentoController.proc.auditivo}">
                            <p:ajax update="pnlModelo"/>
                        </p:selectBooleanCheckbox>
                    </b:column>

                    <p:outputPanel id="pnlModelo">
                        <b:column span="3">
                            <p:panel header="Modelo Auditivo" style="width:220px;"
                                     rendered="#{ProcedimentoController.proc.auditivo==true}">

                                <p:selectOneRadio
                                        value="#{ProcedimentoController.proc.tipoExameAuditivo}"
                                        layout="grid" columns="2">
                                    <f:selectItem itemLabel="Acompanhamentos"
                                                  itemValue="ACOMPANHAMENTOS"/>
                                    <f:selectItem itemLabel="Consultas" itemValue="CONSULTAS"/>
                                    <f:selectItem itemLabel="Aparelhos" itemValue="APARELHOS"/>
                                    <f:selectItem itemLabel="Teste" itemValue="TESTE"/>
                                </p:selectOneRadio>
                            </p:panel>
                        </b:column>
                    </p:outputPanel>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="Laudo"/>
                    </b:column>
                    <b:column span="1">
                        <p:selectBooleanCheckbox
                                value="#{ProcedimentoController.proc.gera_laudo_digita}">
                            <p:ajax update="pnlMes"/>
                        </p:selectBooleanCheckbox>
                    </b:column>

                    <p:outputPanel id="pnlMes">
                        <b:column span="2">
                            <h:outputLabel value="Validade(Meses)" style="margin-top:5px"
                                           rendered="#{ProcedimentoController.proc.gera_laudo_digita==true}"/>
                        </b:column>
                        <b:column span="1">
                            <p:selectOneMenu id="mes"
                                             rendered="#{ProcedimentoController.proc.gera_laudo_digita==true}"
                                             value="#{ProcedimentoController.proc.validade_laudo}"
                                             style="width:200px;" required="true"
                                             requiredMessage="Informe a Validade">
                                <f:selectItem itemLabel="Informe a Validade" itemValue=""/>
                                <f:selectItem itemLabel="1" itemValue="1"/>
                                <f:selectItem itemLabel="2" itemValue="2"/>
                                <f:selectItem itemLabel="3" itemValue="3"/>
                                <f:selectItem itemLabel="4" itemValue="4"/>
                                <f:selectItem itemLabel="5" itemValue="5"/>
                                <f:selectItem itemLabel="6" itemValue="6"/>
                                <f:selectItem itemLabel="7" itemValue="7"/>
                                <f:selectItem itemLabel="8" itemValue="8"/>
                                <f:selectItem itemLabel="9" itemValue="9"/>
                                <f:selectItem itemLabel="10" itemValue="10"/>
                                <f:selectItem itemLabel="11" itemValue="11"/>
                                <f:selectItem itemLabel="12" itemValue="12"/>
                            </p:selectOneMenu>
                        </b:column>
                    </p:outputPanel>

                </b:row>

                <br></br>

                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="CID:"/>
                    </b:column>

                    <b:column span="3">

                        <p:outputPanel id="outCid1">
                            <p:autoComplete value="#{ProcedimentoController.cid}" size="40"
                                            converter="conCid" id="descCid"
                                            completeMethod="#{CidController.listaCidAutoComplete}"
                                            effect="fade" var="theme" forceSelection="true"
                                            minQueryLength="1" itemValue="#{theme}"
                                            itemLabel="#{theme.descCid}">

                                <p:ajax event="itemSelect" update=""/>
                            </p:autoComplete>
                        </p:outputPanel>


                    </b:column>

                    <b:column span="1">
                        <p:commandButton size="sm" immediate="true"
                                         action="#{ProcedimentoController.addCid()}"
                                         tooltip="Adicionar Cid" icon="ui-icon-plus"
                                         update="tabelaCid, outCid1, :frmCadProc:msgError"/>
                    </b:column>

                    <b:column span="5">

                        <p:dataTable emptyMessage="Nenhum Cid"
                                     styleClass="table table-hover" id="tabelaCid"
                                     value="#{ProcedimentoController.proc.listaCid}" var="tab"
                                     paginator="true" paginatorPosition="bottom" rows="12"
                                     resizableColumns="true">

                            <p:column headerText="Cód." style="font-weight:bold;width:20%;">
                                <h:outputText value="#{tab.idCid}"/>
                            </p:column>

                            <p:column headerText="CID" style="font-weight:bold;">
                                <h:outputText value="#{tab.cid}"/>
                            </p:column>

                            <p:column headerText="Descrição" style="font-weight:bold;">
                                <h:outputText value="#{tab.descCid}"/>
                            </p:column>

                            <p:column headerText="Ação">
                                <center>
                                    <p:commandButton process="@this"
                                                     action="#{ProcedimentoController.removerCid()}"
                                                     icon="ui-icon-trash" update="tabelaCid">
                                        <f:setPropertyActionListener value="#{tab}"
                                                                     target="#{ProcedimentoController.cid}"/>
                                    </p:commandButton>
                                </center>
                            </p:column>

                        </p:dataTable>

                    </b:column>

                </b:row>

                <b:row>

                    <b:column span="1">
                        <h:outputLabel value="CBO:"/>
                    </b:column>

                    <b:column span="3">

                        <p:outputPanel id="outCbo">
                            <p:autoComplete value="#{ProcedimentoController.cbo}" size="40"
                                            converter="conCbo" id="descCbo"
                                            completeMethod="#{CboController.listaCboAutoComplete}"
                                            effect="fade" var="theme" forceSelection="true"
                                            minQueryLength="1" itemValue="#{theme}"
                                            itemLabel="#{theme.descCbo}">
                                <p:ajax event="itemSelect" update=""/>
                            </p:autoComplete>
                        </p:outputPanel>
                    </b:column>

                    <b:column span="1">
                        <p:commandButton size="sm" immediate="true"
                                         action="#{ProcedimentoController.addCbo()}"
                                         tooltip="Adicionar CBO" icon="ui-icon-plus"
                                         update="tabelaCbo, outCbo, :frmCadProc:msgError"/>
                    </b:column>

                    <b:column span="5">

                        <p:dataTable emptyMessage="Nenhum CBO"
                                     styleClass="table table-hover" id="tabelaCbo"
                                     value="#{ProcedimentoController.proc.listaCbo}" var="tab"
                                     paginator="true" paginatorPosition="bottom" rows="12"
                                     resizableColumns="true">

                            <p:column headerText="Cód." style="font-weight:bold;width:20%;">
                                <h:outputText value="#{tab.codCbo}"/>
                            </p:column>

                            <p:column headerText="CBO" style="font-weight:bold;">
                                <h:outputText value="#{tab.descCbo}"/>
                            </p:column>

                            <p:column headerText="Ação">
                                <center>
                                    <p:commandButton process="@this"
                                                     action="#{ProcedimentoController.removerCbo()}"
                                                     icon="ui-icon-trash" update="tabelaCbo">
                                        <f:setPropertyActionListener value="#{tab}"
                                                                     target="#{ProcedimentoController.cbo}"/>
                                    </p:commandButton>
                                </center>
                            </p:column>

                        </p:dataTable>

                    </b:column>

                </b:row>

            </div>

            <br></br>

            <center>
                <b:messages value="Error" id="msgError"></b:messages>
            </center>

            <center>

                <b:commandButton
                        action="#{ProcedimentoController.gravarProcedimento()}"
                        icon="glyphicon-ok" size="sm" look="success" update="frmCadProc"
                        style="float:left" value="Incluir"
                        rendered="#{ProcedimentoController.tipo == 1}"/>

                <b:commandButton
                        action="#{ProcedimentoController.alterarProcedimento()}"
                        icon="glyphicon-ok" size="sm" update="frmCadProc" value="Alterar"
                        style="float:left" look="success"
                        rendered="#{ProcedimentoController.tipo  == 2}"/>

                <b:commandButton value="Voltar" icon="glyphicon-arrow-left"
                                 style="float:right" size="sm" immediate="true" look="info"
                                 action="/pages/sishosp/gerenciarProcedimento.faces?faces-redirect=true">
                </b:commandButton>

            </center>
        </h:form>


    </ui:define>
</ui:composition>
</html>