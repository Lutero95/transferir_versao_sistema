<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../../template/template.xhtml">
	<f:metadata>
		<f:viewAction action="#{ProfissionalController.getEditProfissional()}" />
	</f:metadata>
	<ui:define name="body">

		<h:form id="frmCadProfi" class="form-horizontal">
			<div class="panel-body">
				<div class="sub-header">
					<h:outputText value="#{ProfissionalController.cabecalho}"
						styleClass="cadcabecalho"></h:outputText>
					<hr />
				</div>

				<div class="form-group">
					<h:outputLabel value="Especialidade"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outEspeci">

							<p:autoComplete
								value="#{ProfissionalController.profissional.especialidade}"
								size="60" converter="conEspecialidade" id="descE"
								completeMethod="#{EspecialidadeController.listaEspecialidadeAutoComplete}"
								effect="fade" var="theme" forceSelection="true" required="true"
								requiredMessage="Escolha uma especialidade" minQueryLength="1"
								itemValue="#{theme}" itemLabel="#{theme.descEspecialidade}">
							</p:autoComplete>

						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusEsp" icon="ui-icon-search"
							style="margin-left:-20px;" update=":formConsulEspec"
							onclick="PF('dlgConsulEspecialidade').show();" immediate="true"
							actionListener="#{EspecialidadeController.getListarTodasEspecialidades()}" />

					</div>

					<h:outputLabel value="C.B.O." styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outCboP">

							<p:autoComplete
								value="#{ProfissionalController.profissional.cbo}" size="60"
								converter="conCbo" id="descCbo"
								completeMethod="#{CboController.listaCboAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}" required="true"
								requiredMessage="Escolha o C.B.O." itemLabel="#{theme.descCbo}">
							</p:autoComplete>

						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusCbo" icon="ui-icon-search"
							style="margin-left:-20px;" immediate="true"
							onclick="PF('dlgConsulCbo').show();" />

					</div>

				</div>

				<div class="form-group">
					<h:outputLabel value="Procedimento 1"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outProcP1">
							<p:autoComplete
								value="#{ProfissionalController.profissional.proc1}" size="60"
								converter="conProcedimento" id="descProc1"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</div>
					<div class="col-sm-1">

						<p:commandButton id="btBusProc1" icon="ui-icon-search"
							onclick="PF('dlgConsulProc1').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}"
							style="margin-left:-20px;" />
					</div>

					<h:outputLabel value="Procedimento 2"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outProcP2">
							<p:autoComplete
								value="#{ProfissionalController.profissional.proc2}" size="60"
								converter="conProcedimento" id="descProc2"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}"></p:autoComplete>
						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusProc2" icon="ui-icon-search"
							onclick="PF('dlgConsulProc2').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}"
							style="margin-left:-20px;" />
					</div>

				</div>



				<div class="form-group">
					<h:outputLabel value="Nome" styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<h:inputText
							value="#{ProfissionalController.profissional.descricaoProf}"
							required="true" requiredMessage="Informe o Nome"
							validatorMessage="Nome deve conter entre 2 e 30 caracteres."
							class="form-control">
							<f:validateLength minimum="2" maximum="40" />
						</h:inputText>
					</div>
					<h:outputLabel value="CNS" styleClass="col-sm-2 control-label" />
					<div class="col-sm-2">
						<h:inputText value="#{ProfissionalController.profissional.cns}"
							required="true" requiredMessage="CNS obrigátorio!"
							class="form-control" />

					</div>
					<h:outputLabel value="Ativo" class="col-sm-1 control-label" />
					<div class="col-sm-1">
						<h:selectOneMenu style="width:75px" styleClass="form-control"
							value="#{ProfissionalController.profissional.ativo}">
							<f:selectItem itemLabel="SIM" itemValue="true" />
							<f:selectItem itemLabel="NÃO" itemValue="false" />
						</h:selectOneMenu>

					</div>


					<div class="col-sm-5" style="margin-top: 20px">
						<p:commandButton onclick="PF('dlgConsuGrupos').show();"
							value="Incluir Grupo" styleClass="btn btn-primary text-center"
							style="color:black;" icon="ui-icon-plus" process="@this" />

						<br /> <br />

						<p:dataTable style="width: 480px"
							emptyMessage="Nenhum Programa/Grupo" id="tabelagrupo"
							value="#{ProfissionalController.listaGruposEProgramasProfissional}"
							var="programa" scrollRows="3" scrollHeight="150"
							scrollable="true">

							<p:column headerText="Programa">
								<p:outputLabel value="#{programa.descPrograma}" />
							</p:column>

							<p:column headerText="Grupo">
								<p:outputLabel value="#{programa.grupoBean.descGrupo}" />
							</p:column>

							<p:column headerText="Ação">
								<center>
									<p:commandButton immediate="true"
										action="#{ProfissionalController.removeListaGruposEProgramasProfissional()}"
										icon="ui-icon-trash" update=":frmCadProfi">
										<f:setPropertyActionListener value="#{programa}"
											target="#{ProfissionalController.profissional.progAdd}" />
									</p:commandButton>
								</center>
							</p:column>
						</p:dataTable>


					</div>


				</div>

				<center>
					<b:messages value="Error" id="msgError"></b:messages>
				</center>



				<center>
					<b:commandButton
						action="#{ProfissionalController.gravarProfissional()}"
						icon="glyphicon-ok" size="sm" look="success" update=":frmCadProfi"
						style="float:left" value="Incluir"
						rendered="#{ProfissionalController.tipo == 1}" />

					<b:commandButton
						action="#{ProfissionalController.alterarProfissional()}"
						icon="glyphicon-ok" size="sm" update=":frmCadProfi"
						value="Alterar" look="success" style="float:left"
						rendered="#{ProfissionalController.tipo  == 2}" />

					<b:commandButton value="Voltar" icon="glyphicon-arrow-left"
						style="float:right" size="sm" immediate="true" look="info"
						action="/pages/sishosp/gerenciarProfissional.faces?faces-redirect=true">
					</b:commandButton>

				</center>


			</div>
		</h:form>

		<p:dialog header="Consultar Especialidade" modal="true"
			widgetVar="dlgConsulEspecialidade">
			<h:form id="formConsulEspec">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{EspecialidadeController.listaEspecialidade}"
						page-length="5" page-length-menu="5,10,20" var="espec"
						lang="pt-br" display="Nenhuma Especialidade">

						<h:column>
							<f:facet name="header">
                        Especialidade
                    	</f:facet>
							<p:outputLabel value="#{espec.descEspecialidade}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar"
								onclick="PF('dlgConsulEspecialidade').hide();">
								<f:setPropertyActionListener value="#{espec}"
									target="#{ProfissionalController.profissional.especialidade}" />
							</p:commandButton>
						</h:column>

					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar C.B.O." widgetVar="dlgConsulCbo"
			modal="true">
			<h:form id="formConsulCbo">
				<b:dataTable value="#{CboController.listarCbo}" var="cbo"
					page-length="5" page-length-menu="5,10,20" lang="pt-br"
					display="Nenhum C.B.O.">

					<h:column>
						<f:facet name="header">
                        Descrição
                    </f:facet>
						<p:outputLabel value="#{cbo.descCbo}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                        Adicionar
                    </f:facet>
						<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
							title="Selecionar" onclick="PF('dlgConsulCbo').hide();">
							<f:setPropertyActionListener value="#{cbo}"
								target="#{ProfissionalController.profissional.cbo}" />
						</p:commandButton>
					</h:column>

				</b:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento 1" widgetVar="dlgConsulProc1"
			modal="true">
			<h:form id="formConsulProc1">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar" onclick="PF('dlgConsulProc1').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{ProfissionalController.profissional.proc1}" />
							</p:commandButton>
						</h:column>


					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento 2" widgetVar="dlgConsulProc2"
			modal="true">
			<h:form id="formConsulProc2">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar" onclick="PF('dlgConsulProc2').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{ProfissionalController.profissional.proc2}" />
							</p:commandButton>
						</h:column>


					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Grupos" widgetVar="dlgConsuGrupos"
			modal="true">
			<h:form id="formConsuGrops">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{GrupoController.listarProgramasEGrupos()}"
						id="dtGrupos" var="programa" lang="pt-br"
						display="Nenhum Profissional">


						<h:column>
							<f:facet name="header">
                        Programa
                    	</f:facet>
							<p:outputLabel value="#{programa.descPrograma}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Grupo
                    	</f:facet>
							<p:outputLabel value="#{programa.grupoBean.descGrupo}" />
						</h:column>


						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton
								update=":frmCadProfi:tabelagrupo :frmCadProfi:msgError"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsuGrupos').hide();"
								action="#{ProfissionalController.addListaGruposEProgramasProfissional()}">
								<f:setPropertyActionListener value="#{programa}"
									target="#{ProfissionalController.profissional.progAdd}" />
							</p:commandButton>
						</h:column>

					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

	</ui:define>

</ui:composition>
</html>