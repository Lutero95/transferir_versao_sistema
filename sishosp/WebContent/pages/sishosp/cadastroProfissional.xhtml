<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../../template/template.xhtml">
	<f:metadata>
		<f:viewAction action="#{ProfissionalController.getEditProfissional()}" />
	</f:metadata>
	<ui:define name="body">


		<h:form id="frmCadProfi" class="form-horizontal">
			<div class="panel-body">
				<div class="sub-header">
					<h:outputText value="#{ProfissionalController.cabecalho}"
						styleClass="cadcabecalho"></h:outputText>
					<hr />
				</div>

				<div class="form-group">
					<h:outputLabel value="Especialidade"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outEspeci">

							<p:autoComplete
								value="#{ProfissionalController.profissional.especialidade}"
								size="60" converter="conEspecialidade" id="descE"
								completeMethod="#{EspecialidadeController.listaEspecialidadeAutoComplete}"
								effect="fade" var="theme" forceSelection="true" required="true"
								requiredMessage="Escolha uma especialidade" minQueryLength="1"
								itemValue="#{theme}" itemLabel="#{theme.descEspecialidade}">
							</p:autoComplete>

						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusEsp" icon="ui-icon-search"
							style="margin-left:-20px;height:35px" update=":formConsulEspec"
							onclick="PF('dlgConsulEspecialidade').show();"
							actionListener="#{EspecialidadeController.getListarTodasEspecialidades()}" />

					</div>

					<h:outputLabel value="C.B.O." styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outCboP">

							<p:autoComplete
								value="#{ProfissionalController.profissional.cbo}" size="60"
								converter="conCbo" id="descCbo"
								completeMethod="#{CboController.listaCboAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.descCbo}">
							</p:autoComplete>

						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusCbo" icon="ui-icon-search"
							style="margin-left:-20px;height:35px"
							onclick="PF('dlgConsulCbo').show();" />

					</div>

				</div>

				<div class="form-group">
					<h:outputLabel value="Procedimento 1"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outProcP1">
							<p:autoComplete
								value="#{ProfissionalController.profissional.proc1}" size="60"
								converter="conProcedimento" id="descProc1"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</div>
					<div class="col-sm-1">

						<p:commandButton id="btBusProc1" icon="ui-icon-search"
							onclick="PF('dlgConsulProc1').show();"
							actionListener="#{ProcedimentoController.listarProcedimentos()}"
							style="margin-left:-20px;height:35px" />
					</div>

					<h:outputLabel value="Procedimento 2"
						styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<p:outputPanel id="outProcP2">
							<p:autoComplete
								value="#{ProfissionalController.profissional.proc2}" size="60"
								converter="conProcedimento" id="descProc2"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}"></p:autoComplete>
						</p:outputPanel>
					</div>
					<div class="col-sm-1">
						<p:commandButton id="btBusProc2" icon="ui-icon-search"
							onclick="PF('dlgConsulProc2').show();"
							actionListener="#{ProcedimentoController.listarProcedimentos()}"
							style="margin-left:-20px;height:35px" />
					</div>

				</div>



				<div class="form-group">
					<h:outputLabel value="Nome" styleClass="col-sm-1 control-label" />
					<div class="col-sm-4">
						<h:inputText
							value="#{ProfissionalController.profissional.descricaoProf}"
							required="true" requiredMessage="Informe o Nome"
							validatorMessage="Nome deve conter entre 2 e 30 caracteres."
							class="form-control">
							<f:validateLength minimum="2" maximum="40" />
						</h:inputText>
					</div>
					<h:outputLabel value="CNS" styleClass="col-sm-2 control-label" />
					<div class="col-sm-2">
						<h:inputText value="#{ProfissionalController.profissional.cns}"
							class="form-control" />

					</div>
					<h:outputLabel value="Ativo" class="col-sm-1 control-label" />
					<div class="col-sm-1">
						<h:selectOneMenu style="width:75px" styleClass="form-control"
							value="#{ProfissionalController.profissional.ativo}">
							<f:selectItem itemLabel="SIM" itemValue="true" />
							<f:selectItem itemLabel="NÃO" itemValue="false" />
						</h:selectOneMenu>

					</div>

				</div>


				<div class="form-group">
					<div class="col-sm-5">
						<p:commandButton onclick="PF('dlgConsulProgramas').show();"
							value="Incluir Programa" styleClass="btn btn-primary text-center"
							process="@this" style="color:black;" icon="ui-icon-plus" />
						<br /> <br />
						<p:dataTable emptyMessage="Nenhum Programa"
							value="#{ProfissionalController.profissional.programa}"
							var="prog" scrollRows="3" scrollHeight="150" scrollable="true">
							<p:column headerText="Programa" width="80%">
								<p:outputLabel value="#{prog.descPrograma}" />
							</p:column>
							<p:column headerText="Ação">
								<center>
									<p:commandButton
										action="#{ProfissionalController.profissional.removeProgLista()}"
										icon="ui-icon-trash" update=":frmCadProfi">
										<f:setPropertyActionListener value="#{prog}"
											target="#{ProfissionalController.profissional.progRmv}" />
									</p:commandButton>
								</center>
							</p:column>
						</p:dataTable>

					</div>


					<div class="col-sm-5">
						<p:commandButton onclick="PF('dlgConsuGrupos').show();"
							actionListener="#{GrupoController.getListaTodosGrupos()}"
							value="Incluir Grupo" styleClass="btn btn-primary text-center"
							style="color:black;" icon="ui-icon-plus" process="@this" />
						<br /> <br />
						<p:dataTable style="width: 480px" emptyMessage="Nenhum Grupo"
							value="#{ProfissionalController.profissional.grupo}" var="grupo"
							scrollRows="3" scrollHeight="150" scrollable="true">
							<p:column headerText="Grupo">
								<p:outputLabel value="#{grupo.descGrupo}" />
							</p:column>
							<p:column headerText="Ação">
								<center>
									<p:commandButton
										action="#{ProfissionalController.profissional.removeGrupoLista()}"
										icon="ui-icon-trash" update=":frmCadProfi">
										<f:setPropertyActionListener value="#{grupo}"
											target="#{ProfissionalController.profissional.grupoRmv}" />
									</p:commandButton>
								</center>
							</p:column>
						</p:dataTable>


					</div>


				</div>

				<center>
					<b:messages value="Error" id="msgError"></b:messages>
				</center>



				<center>
					<b:commandButton
						action="#{ProfissionalController.gravarProfissional()}"
						icon="glyphicon-ok" size="sm" look="success" update=":frmCadProfi"
						style="float:left" value="Incluir"
						rendered="#{ProfissionalController.tipo == 1}" />

					<b:commandButton
						action="#{ProfissionalController.alterarProfissional()}"
						icon="glyphicon-ok" size="sm" update=":frmCadProfi"
						value="Alterar" look="success" style="float:left"
						rendered="#{ProfissionalController.tipo  == 2}" />

					<b:commandButton value="Voltar" icon="glyphicon-arrow-left"
						style="float:right" size="sm" immediate="true" look="info"
						action="/pages/sishosp/gerenciarProfissional.faces?faces-redirect=true">
					</b:commandButton>

				</center>


			</div>
		</h:form>



		<p:dialog header="Consulta Programa" widgetVar="dlgConsulProgramas"
			modal="true" width="500px">
			<h:form id="formConsulProgP">
				<p:dataTable value="#{ProgramaController.listaProgramas}" var="prog"
					resizableColumns="true"
					emptyMessage="Não existe nenhum programa cadastrado!">
					<p:column headerText="Código">
						<p:outputLabel value="#{prog.idPrograma}" />
					</p:column>
					<p:column headerText="Programa">
						<p:outputLabel value="#{prog.descPrograma}" />
					</p:column>
					<p:column style="width:50px;text-align: center">
						<p:commandButton update=":frmCadProfi, :formConsuGrops:dtGrupos"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsulProgramas').hide();"
							action="#{ProfissionalController.profissional.addProgLista()}">
							<f:setPropertyActionListener value="#{prog}"
								target="#{ProfissionalController.profissional.progAdd}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Especialidade" height="300px"
			resizable="false" widgetVar="dlgConsulEspecialidade" modal="true"
			width="500px">
			<h:form id="formConsulEspec">
				<p:outputPanel autoUpdate="true">
					<p:dataTable value="#{EspecialidadeController.listaEspecialidade}"
						scrollRows="3" scrollHeight="270" scrollable="true" var="espec"
						resizableColumns="true"
						emptyMessage="Não existe nenhuma especialidade cadastrada!">
						<p:column headerText="Especialidade">
							<p:outputLabel value="#{espec.descEspecialidade}" />
						</p:column>
						<p:column style="width:50px;text-align: center">
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar"
								onclick="PF('dlgConsulEspecialidade').hide();">
								<f:setPropertyActionListener value="#{espec}"
									target="#{ProfissionalController.profissional.especialidade}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Cbo" widgetVar="dlgConsulCbo" modal="true"
			height="300px" width="500px">
			<h:form id="formConsulCbo">
				<p:dataTable value="#{CboController.listarCbo}" var="cbo"
					scrollRows="3" scrollHeight="270" scrollable="true"
					resizableColumns="true"
					emptyMessage="Não existe nenhum CBO cadastrado!">
					<p:column headerText="Código">
						<p:outputLabel value="#{cbo.codigo}" />
					</p:column>
					<p:column headerText="Descrição">
						<p:outputLabel value="#{cbo.descCbo}" />
					</p:column>
					<p:column style="width:50px;text-align: center">
						<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
							title="Selecionar" onclick="PF('dlgConsulCbo').hide();">
							<f:setPropertyActionListener value="#{cbo}"
								target="#{ProfissionalController.profissional.cbo}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Procedimento 1" widgetVar="dlgConsulProc1"
			height="300px" modal="true" width="500px">
			<h:form id="formConsulProc1">
				<p:outputPanel autoUpdate="true">
					<p:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						scrollRows="3" scrollHeight="270" scrollable="true" var="proc"
						resizableColumns="true"
						emptyMessage="Não existe nenhum procedimento cadastrado!">
						<p:column headerText="Código">
							<p:outputLabel value="#{proc.codProc}" />
						</p:column>
						<p:column headerText="Descrição">
							<p:outputLabel value="#{proc.nomeProc}" />
						</p:column>
						<p:column style="width:50px;text-align: center">
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar" onclick="PF('dlgConsulProc1').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{ProfissionalController.profissional.proc1}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Procedimento 2" widgetVar="dlgConsulProc2"
			height="300px" modal="true" width="500px">
			<h:form id="formConsulProc2">
				<p:outputPanel autoUpdate="true">
					<p:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						scrollRows="3" scrollHeight="270" scrollable="true" var="proc"
						resizableColumns="true"
						emptyMessage="Não existe nenhum procedimento cadastrado!">
						<p:column headerText="Código">
							<p:outputLabel value="#{proc.codProc}" />
						</p:column>
						<p:column headerText="Descrição">
							<p:outputLabel value="#{proc.nomeProc}" />
						</p:column>
						<p:column style="width:50px;text-align: center">
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar" onclick="PF('dlgConsulProc2').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{ProfissionalController.profissional.proc2}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consulta Grupos" widgetVar="dlgConsuGrupos"
			height="300px" modal="true" width="550px">
			<h:form id="formConsuGrops">
				<p:outputPanel autoUpdate="true">
					<p:dataTable value="#{GrupoController.listaGrupos}" id="dtGrupos"
						scrollRows="3" scrollHeight="270" scrollable="true"
						resizableColumns="true" var="grupo"
						emptyMessage="Não existe nenhum grupo cadastrado!">
						<p:column headerText="Código">
							<p:outputLabel value="#{grupo.idGrupo}" />
						</p:column>
						<p:column headerText="Grupo">
							<p:outputLabel value="#{grupo.descGrupo}" />
						</p:column>
						<p:column headerText="Quantidade Frequência">
							<p:outputLabel value="#{grupo.qtdFrequencia}" />
						</p:column>

						<p:column style="width:50px;text-align: center">
							<p:commandButton update=":frmCadProfi" icon="ui-icon-check"
								title="Selecionar" onclick="PF('dlgConsuGrupos').hide();"
								action="#{ProfissionalController.profissional.addGrupoLista()}">
								<f:setPropertyActionListener value="#{grupo}"
									target="#{ProfissionalController.profissional.grupoAdd}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

	</ui:define>

</ui:composition>
</html>