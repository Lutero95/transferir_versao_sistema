<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../../template/template.xhtml">

    <ui:define name="content">
        <f:metadata>
            <f:viewAction
                    action="#{AtendimentoController.getCarregaAtendimentoProfissional()}"/>
        </f:metadata>

        <h:form id="formConsAge">
            <div class="panel-body">
                <div class="sub-header">
                    <h4>Atendimento Profissional</h4>
                    <hr/>
                </div>
            </div>

            <b:row>

                <b:column span="2">
                    <h:outputLabel value="Paciente"
                                   style="margin-top:10px"/>
                </b:column>

                <b:column span="4">
                    <b:inputText
                            value="#{AtendimentoController.atendimento.paciente.nome}"
                            readonly="true" class="form-control" id="inputname"></b:inputText>
                </b:column>

                <b:column span="2">
                    <h:outputLabel value="Procedimento"
                                   style="margin-top:10px"/>
                </b:column>

                <b:column span="4">
                    <p:outputPanel id="outProcP1">
                        <p:autoComplete required="true" requiredMessage="Escolha o procedimento!"
                                        value="#{AtendimentoController.atendimento.procedimento}"
                                        size="60" converter="conProcedimento" id="descProc1"
                                        completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}"
                                        itemLabel="#{theme.nomeProc}">
                        </p:autoComplete>
                    </p:outputPanel>
                </b:column>

            </b:row>

            <br/>

            <b:row>

                <b:column span="2">
                    <h:outputLabel value="Profissional"/>
                </b:column>

                <b:column span="4">
                    <b:inputText
                            value="#{AtendimentoController.atendimento.funcionario.nome}"
                            readonly="true" class="form-control" id="inputnamefunc"></b:inputText>
                </b:column>

                <b:column span="2">
                    <h:outputLabel value="Atendimento"/>
                </b:column>

                <b:column span="4">
                    <p:outputPanel id="outProfi">
                        <p:autoComplete id="acpro" required="true" requiredMessage="Escolha o atendente"
                                        value="#{AtendimentoController.funcionario}" size="60"
                                        converter="conFuncionario"
                                        completeMethod="#{MBFuncionarios.listaProfissionalAutoComplete}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}" itemLabel="#{theme.nome}">
                        </p:autoComplete>
                    </p:outputPanel>
                </b:column>

            </b:row>

            <br/>

            <b:row>

                <b:column span="2">
                    <h:outputLabel value="Status"/>
                </b:column>

                <b:column span="4">
                    <b:selectOneMenu required="true" requiredMessage="Escolha um status!"
                                     value="#{AtendimentoController.atendimento.status}" id="status">
                        <f:selectItem itemLabel="Selecione" itemValue=""/>
                        <f:selectItem itemLabel="Atendido" itemValue="A"/>
                        <f:selectItem itemLabel="Profissional faltou" itemValue="PF"/>
                    </b:selectOneMenu>
                </b:column>

                <b:column span="2">
                    <b:commandButton oncomplete="PF('dialogExclusao').show();" rendered="false"
                                     icon="glyphicons-cleaning" size="sm" value="Limpar" look="success"/>
                </b:column>

            </b:row>

            <br/>
            <br/>

            <div align="center">
                <b:messages value="Error" id="msgPagina"></b:messages>
            </div>

            <div align="center">

                <b:commandButton
                        action="#{AtendimentoController.realizarAtendimentoProfissional()}"
                        icon="glyphicon-ok" size="sm" look="success" value="Gravar"
                        update="msgPagina" style="float:left"/>

                <b:commandButton value="Voltar" icon="glyphicon-arrow-left"
                                 style="float:right" size="sm" immediate="true" look="info"
                                 action="/pages/sishosp/atendimento.faces?faces-redirect=true">
                </b:commandButton>

            </div>

        </h:form>

        <p:dialog widgetVar="dialogExclusao" modal="true"
                  header="Limpar Atendimento" resizable="false">

            <h:form id="dlglimpar">
                <h:panelGrid columns="1">

                    <div class="alert alert-warning" role="alert">Deseja limpar o
                        atendimento?
                    </div>

                </h:panelGrid>

                <div align="center">

                    <p:separator/>

                    <b:commandButton look="success" value="Sim" style="float:left;"
                                     action="#{AtendimentoController.limparAtendimentoProfissional()}"
                                     ajax="true" icon="glyphicon-ok" update=":formConsAge:msgPagina"/>

                    <b:commandButton value="NÃ£o"
                                     oncomplete="PF('dialogExclusao').hide();" look="info" ajax="true"
                                     icon="glyphicon-remove" style="margin-left:5px;float:right;"/>

                </div>

            </h:form>

        </p:dialog>

    </ui:define>

</ui:composition>