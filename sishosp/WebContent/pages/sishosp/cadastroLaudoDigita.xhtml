<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="../../template/template.xhtml">

	<ui:define name="body">

		<h:form id="formLaudo">

			<div class="panel-body">
				<div class="sub-header">
					<h:outputText value="#{LaudoController.cabecalho}"
						styleClass="cadcabecalho"></h:outputText>
					<hr />
				</div>

				<b:row>
					<b:column span="1">
						<h:outputLabel value="Paciente:" style="margin-top:5px" />
					</b:column>

					<b:column span="3">
						<p:outputPanel id="outPac1">
							<p:autoComplete value="#{LaudoController.laudo.paciente}"
								size="40" converter="conPaciente" required="true"
								requiredMessage="Escolha um paciente!"
								completeMethod="#{PacienteController.listaPacienteAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nome}">
								<p:ajax event="itemSelect"
									update=":formLaudo:outPac1, :formLaudo:outPac2, :formLaudo:outPac3" />
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusPa" icon="ui-icon-search"
							onclick="PF('dlgConsuPac').show();" />
					</b:column>

					<b:column span="1">
						<h:outputLabel value="CNS:" style="margin-top:5px" />
					</b:column>

					<b:column span="2">
						<p:outputPanel id="outPac2">
							<p:outputLabel value="#{LaudoController.laudo.paciente.cns}"
								style="margin-top:5px" />
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<h:outputLabel value="CPF:" style="margin-top:5px" />
					</b:column>

					<b:column span="1">
						<p:outputPanel id="outPac3">
							<p:outputLabel value="#{LaudoController.laudo.paciente.cpf}"
								style="margin-top:5px" />
						</p:outputPanel>
					</b:column>

				</b:row>

				<br></br>

				<b:row>

					<b:column span="1">
						<h:outputLabel value="Recuso:" />
					</b:column>

					<b:column span="2">
						<p:selectOneRadio id="recuso" required="true"
							layout="pageDirection" requiredMessage="Escolha o recuso!"
							value="#{LaudoController.laudo.recuso}">
							<f:selectItem itemLabel="Faec" itemValue="faes" />
							<f:selectItem itemLabel="Mac" itemValue="mac" />
						</p:selectOneRadio>
					</b:column>

					<b:column span="2">
						<h:outputLabel value="Data para Solicitação:" />
					</b:column>

					<b:column span="2">
						<p:calendar id="dataAte" locale="pt" required="true" size="10"
							requiredMessage="É necessário informar a data de solitação"
							value="#{LaudoController.laudo.data_solicitacao}" mask="true"
							pattern="dd/MM/yyyy" />
					</b:column>

					<b:column span="1">
						<h:outputLabel value="Período:" />
					</b:column>

					<b:column span="2">
						<p:selectOneRadio id="prorrogar" required="true"
							layout="pageDirection" requiredMessage="Período é necessário!"
							value="#{LaudoController.laudo.periodo}">
							<f:selectItem itemLabel="30 dias" itemValue="30" />
							<f:selectItem itemLabel="90 dias" itemValue="90" />
						</p:selectOneRadio>
					</b:column>

				</b:row>

				<br></br>

				<b:row>

					<b:column span="1">
						<h:outputLabel value="Mês Início:" />
					</b:column>

					<b:column span="2">
						<p:selectOneMenu style="width:120px" required="true"
							requiredMessage="Escolha o mês início!"
							value="#{LaudoController.laudo.mes_inicio}">
							<f:selectItem itemLabel="Janeiro" itemValue="1" />
							<f:selectItem itemLabel="Fevereiro" itemValue="2" />
							<f:selectItem itemLabel="Março" itemValue="3" />
							<f:selectItem itemLabel="Abril" itemValue="4" />
							<f:selectItem itemLabel="Maio" itemValue="5" />
							<f:selectItem itemLabel="Junho" itemValue="6" />
							<f:selectItem itemLabel="Julho" itemValue="7" />
							<f:selectItem itemLabel="Agosto" itemValue="8" />
							<f:selectItem itemLabel="Setembro" itemValue="9" />
							<f:selectItem itemLabel="Outubro" itemValue="10" />
							<f:selectItem itemLabel="Novembro" itemValue="11" />
							<f:selectItem itemLabel="Dezembro" itemValue="12" />
						</p:selectOneMenu>
					</b:column>

					<b:column span="1">
						<h:outputLabel value="Ano Início:" />
					</b:column>

					<b:column span="2">
						<h:inputText value="#{LaudoController.laudo.ano_inicio}"
							required="true" requiredMessage="Escolha o ano início!">
							<p:ajax listener="#{LaudoController.calcularPeriodoLaudo()}"
								update="outAnoFim, outMesFim" global="false" event="blur"></p:ajax>
						</h:inputText>
					</b:column>

					<b:column span="1">
						<h:outputLabel value="Mês Fim:" style="margin-top:5px" />
					</b:column>

					<b:column span="2">
						<p:outputPanel id="outMesFim">
							<h:outputLabel value="Janeiro"
								rendered="#{LaudoController.laudo.mes_final == 1}" />
							<h:outputLabel value="Fevereiro"
								rendered="#{LaudoController.laudo.mes_final == 2}" />
							<h:outputLabel value="Março"
								rendered="#{LaudoController.laudo.mes_final == 3}" />
							<h:outputLabel value="Abril"
								rendered="#{LaudoController.laudo.mes_final == 4}" />
							<h:outputLabel value="Maio"
								rendered="#{LaudoController.laudo.mes_final == 5}" />
							<h:outputLabel value="Junho"
								rendered="#{LaudoController.laudo.mes_final == 6}" />
							<h:outputLabel value="Julho"
								rendered="#{LaudoController.laudo.mes_final == 7}" />
							<h:outputLabel value="Agosto"
								rendered="#{LaudoController.laudo.mes_final == 8}" />
							<h:outputLabel value="Setembro"
								rendered="#{LaudoController.laudo.mes_final == 9}" />
							<h:outputLabel value="Outubro"
								rendered="#{LaudoController.laudo.mes_final == 10}" />
							<h:outputLabel value="Novembro"
								rendered="#{LaudoController.laudo.mes_final == 11}" />
							<h:outputLabel value="Dezembro"
								rendered="#{LaudoController.laudo.mes_final == 12}" />
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<h:outputLabel value="Ano Fim:" style="margin-top:5px" />
					</b:column>

					<b:column span="2">
						<p:outputPanel id="outAnoFim">
							<p:outputLabel value="#{LaudoController.laudo.ano_final}"
								style="margin-top:5px" />
						</p:outputPanel>
					</b:column>

				</b:row>

				<br></br> <br></br>

				<b:row>

					<b:column span="2">
						<h:outputLabel value="Procedimento Primário:" style="color:blue" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcP1">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_primario}" size="40"
								converter="conProcedimento" id="descProcP1" required="true"
								requiredMessage="Escolha o procedimento primário!"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcP1" icon="ui-icon-search"
							onclick="PF('dlgConsulProcPrimario').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

					<b:column span="2">
						<h:outputLabel value="Procedimento Secundário 1:" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcS1">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_secundario1}"
								size="40" converter="conProcedimento" id="descProcS1"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcS1" icon="ui-icon-search"
							onclick="PF('dlgConsulProcSecundario1').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

				</b:row>

				<br></br> <br></br>

				<b:row>

					<b:column span="2">
						<h:outputLabel value="Procedimento Secundário 2:" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcS2">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_secundario2}"
								size="40" converter="conProcedimento" id="descProcS2"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcS2" icon="ui-icon-search"
							onclick="PF('dlgConsulProcSecundario2').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

					<b:column span="2">
						<h:outputLabel value="Procedimento Secundário 3:" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcS3">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_secundario3}"
								size="40" converter="conProcedimento" id="descProcS3"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcS3" icon="ui-icon-search"
							onclick="PF('dlgConsulProcSecundario3').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

				</b:row>

				<br></br> <br></br>

				<b:row>

					<b:column span="2">
						<h:outputLabel value="Procedimento Secundário 4:" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcS4">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_secundario4}"
								size="40" converter="conProcedimento" id="descProcS4"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcS4" icon="ui-icon-search"
							onclick="PF('dlgConsulProcSecundario4').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

					<b:column span="2">
						<h:outputLabel value="Procedimento Secundário 5:" />
					</b:column>

					<b:column span="3">

						<p:outputPanel id="outProcS5">
							<p:autoComplete
								value="#{LaudoController.laudo.procedimento_secundario5}"
								size="40" converter="conProcedimento" id="descProcS5"
								completeMethod="#{ProcedimentoController.listaProcedimentoAutoComplete}"
								effect="fade" var="theme" forceSelection="true"
								minQueryLength="1" itemValue="#{theme}"
								itemLabel="#{theme.nomeProc}">
							</p:autoComplete>
						</p:outputPanel>
					</b:column>

					<b:column span="1">
						<p:commandButton id="btBusProcS5" icon="ui-icon-search"
							onclick="PF('dlgConsulProcSecundario5').show();" immediate="true"
							actionListener="#{ProcedimentoController.listarProcedimentos()}" />
					</b:column>

				</b:row>

				<br></br>

				<b:row>

					<b:column span="2">
						<h:outputLabel value="Observação:" />
					</b:column>

					<b:column span="4">
						<h:inputTextarea value="#{LaudoController.laudo.obs}"
							scrollHeight="40" required="true" rows="6" cols="89"
							style="height:80px;width:300px"></h:inputTextarea>
					</b:column>

				</b:row>

				<center>
					<b:messages value="Error" id="msgError"></b:messages>
				</center>

				<br></br> <br></br>

				<center>

					<b:commandButton action="#{GrupoController.gravarGrupo()}"
						icon="glyphicon-ok" size="sm" look="success" value="Incluir"
						style="float:left" />

					<b:commandButton action="#{GrupoController.alterarGrupo()}"
						icon="glyphicon-ok" size="sm" value="Alterar" look="success"
						style="float:left" rendered="#{LaudoController.tipo2  == 2}" />

					<b:commandButton value="Voltar" icon="glyphicon-arrow-left"
						style="float:right" size="sm" immediate="true" look="info"
						action="/pages/sishosp/gerenciarLaudoDigita.faces?faces-redirect=true"></b:commandButton>

				</center>
			</div>
		</h:form>



		<p:dialog header="Consultar Pacientes" widgetVar="dlgConsuPac"
			modal="true" width="750px" height="400px">
			<h:form id="formConsuPac">
				<p:growl id="msgC" />

				<div class="form-group row">
					<div class="col-sm-2"></div>
				</div>


				<b:dataTable id="dt" var="pacie"
					value="#{PacienteController.listarPacienteAgenda()}" lang="pt-br"
					display="Nenhum Paciente">

					<h:column>
						<f:facet name="header">
                        Código
                    </f:facet>

						<p:outputLabel value="#{pacie.id_paciente}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                        Nome
                    </f:facet>

						<p:outputLabel value="#{pacie.nome}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                        Cpf
                    </f:facet>
						<p:outputLabel value="#{pacie.cpf}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                        Ação
                    </f:facet>
						<p:commandButton
							update=":formLaudo:outPac1, :formLaudo:outPac2, :formLaudo:outPac3"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsuPac').hide();">
							<f:setPropertyActionListener value="#{pacie}"
								target="#{LaudoController.laudo.paciente}" />
						</p:commandButton>

					</h:column>


				</b:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Primário"
			widgetVar="dlgConsulProcPrimario" modal="true">
			<h:form id="formConsulProcPrimario">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcP1"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcPrimario').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_primario}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Secundário 1"
			widgetVar="dlgConsulProcSecundario1" modal="true">
			<h:form id="formConsulProcSecundario1">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcS1"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcSecundario1').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_secundario1}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Secundário 2"
			widgetVar="dlgConsulProcSecundario2" modal="true">
			<h:form id="formConsulProcSecundario2">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcS2"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcSecundario2').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_secundario2}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Secundário 3"
			widgetVar="dlgConsulProcSecundario3" modal="true">
			<h:form id="formConsulProcSecundario3">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcS3"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcSecundario3').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_secundario3}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Secundário 4"
			widgetVar="dlgConsulProcSecundario4" modal="true">
			<h:form id="formConsulProcSecundario4">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcS4"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcSecundario4').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_secundario4}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Consultar Procedimento Secundário 5"
			widgetVar="dlgConsulProcSecundario5" modal="true">
			<h:form id="formConsulProcSecundario5">
				<p:outputPanel autoUpdate="true">
					<b:dataTable value="#{ProcedimentoController.listaProcedimentos}"
						var="proc" lang="pt-br" display="Nenhum Procedimento">

						<h:column>
							<f:facet name="header">
                        Descrição
                    	</f:facet>
							<p:outputLabel value="#{proc.nomeProc}" />
						</h:column>

						<h:column>
							<f:facet name="header">
                        Adicionar
                    	</f:facet>
							<p:commandButton update=":formLaudo:outProcS5"
								icon="ui-icon-check" title="Selecionar"
								onclick="PF('dlgConsulProcSecundario5').hide();">
								<f:setPropertyActionListener value="#{proc}"
									target="#{LaudoController.laudo.procedimento_secundario5}" />
							</p:commandButton>
						</h:column>
					</b:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>

	</ui:define>
</ui:composition>
</html>