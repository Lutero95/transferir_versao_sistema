<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../../template/template.xhtml">

    <ui:define name="content">

        <f:metadata>
            <f:viewAction
                    action="#{AlteracaoPacienteController.carregaAlteracao()}"/>
        </f:metadata>

        <div class="panel panel-primary top-primary">
            <div class="panel-heading top-heading">
                <h4 class="panel-title">Alteração de Pacientes em Terapia</h4>
            </div>

            <div class="panel-body table-body sub-table-body">
 
                <h:form id="formInsercao">
					<p:fieldset legend="Dados do Laudo">
						<b:row
							rendered="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.id==null}">
							<b:column span="2" class="label-position">
								<p:outputLabel value="Laudo:"
									style="margin-left:-15px; margin-top: 8px;
    									margin-bottom: 15px;color:#2e84ce;"></p:outputLabel>

								<p:commandButton size="sm" style="margin-left: 20px;"
									class="new-btn-acao-table acao-editar" icon="ui-icon-search"
									update=":formConsuLaudo"
									actionListener="#{AlteracaoPacienteController.listarLaudosVigentes()}"
									oncomplete="PF('dlgConsuLaudo').show();" />
							</b:column>
						</b:row>

						<b:row
							rendered="#{AlteracaoPacienteController.insercao.paciente.id_paciente!=null and AlteracaoPacienteController.insercaoParaLaudo.laudo.id==null}">
							<b:column span="3" class="label-position inserPacient">
								<b:label value="Paciente:" class="fire-label" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercao.paciente.nome}"
									class="campo-laudoDig3" />
							</b:column>

							<b:column span="3" class="label-position inserPacient"
								rendered="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.id!=null}">
								<b:label value="Procedimento:"  severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.procedimentoPrimario.nomeProc}"
									class="campo-laudoDig3" />
							</b:column>
						</b:row>

						<b:row
							rendered="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.id!=null}">
							<b:column span="3" class="label-position inserPacient">
								<b:label value="Paciente:" class="fire-label" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.paciente.nome}"
									class="campo-laudoDig3" />
							</b:column>

							<b:column span="3" class="label-position inserPacient">
								<b:label value="Procedimento:" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.procedimentoPrimario.nomeProc}"
									class="campo-laudoDig3" />
							</b:column>
						</b:row>

						<b:row
							rendered="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.id!=null}">
							<b:column span="3" class="label-position inserPacient">
								<b:label value="CID Primário:" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.cid1.descCid}"
									class="campo-laudoDig3" />
							</b:column>

							<b:column span="3" class="label-position inserPacient">
								<b:label value="Vigência Inicial:" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.vigenciaInicial}"
									class="campo-laudoDig3">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel>
							</b:column>

							<b:column span="3" class="label-position inserPacient">
								<b:label value="Vigência Final" severity="info" />

								<h:outputLabel
									value="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.vigenciaFinal}"
									class="campo-laudoDig3">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel>
							</b:column>
						</b:row>
					</p:fieldset>
				</h:form>

                <h:form id="formInsercao2">
                    <b:row>
                        <b:column span="2" class="label-position data-size">

                            <b:label value="Data de Inclusão:" id="datasoli"
                                     severity="info"/>

                            <p:calendar
                                    value="#{AlteracaoPacienteController.insercao.dataSolicitacao}"
                                    id="dtagen" locale="pt" navigator="true" mask="true" required="true"
                                    requiredMessage="Data de Inclusão: Campo obrigatório!"
                                    class="select-agendaEquipe2" showOn="button"
                                    pattern="dd/MM/yyyy" size="15">
                                    
                                    <p:ajax event="dateSelect" 
                                    	listener="#{AlteracaoPacienteController.atualizaarDataSolicitacao(AlteracaoPacienteController.insercao.dataSolicitacao)}" />
                            </p:calendar>
                        </b:column>
                    </b:row>

                    <b:row>
                        <p:outputPanel id="outProg">
                            <b:column span="5"
                                      class="label-position new-data-size new-comple1">
                                <b:label for="prog" value="Programa:" id="prog" class="fire-label"
                                         rendered="#{AlteracaoPacienteController.tipo == 'E'}"
                                         severity="info"/>

                                <p:autoComplete
                                        value="#{AlteracaoPacienteController.insercao.programa}"
                                        readonly="true"
                                        rendered="#{AlteracaoPacienteController.tipo == 'E'}" size="31"
                                        converter="conPrograma" class="select-agendaEquipe4"
                                        completeMethod="#{ProgramaController.listaProgramaAutoCompleteUsuario}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}"
                                        itemLabel="#{theme.descPrograma}">
                                    <p:ajax event="itemSelect"
                                            listener="#{AgendaController.selectPrograma}" update=""/>
                                </p:autoComplete>
                            </b:column>
                        </p:outputPanel>
                    </b:row>
                    
                    <b:row>
                    	<p:outputPanel id="outGrupo">
                            <b:column span="5"
                                      class="label-position new-data-size4 new-comple1">
                                <b:label for="prog" value="Grupo:" id="grupo" class="fire-label"
                                         rendered="#{AlteracaoPacienteController.tipo == 'E'}"
                                         severity="info"/>

                                <p:autoComplete
                                        value="#{AlteracaoPacienteController.insercao.grupo}"
                                        readonly="true"
                                        rendered="#{AlteracaoPacienteController.tipo == 'E'}" size="31"
                                        converter="conGrupo" class="select-agendaEquipe4"
                                        disabled="#{AlteracaoPacienteController.insercao.programa==null}"
                                        completeMethod="#{InsercaoPacienteController.listaGrupoAutoComplete}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}"
                                        itemLabel="#{theme.descGrupo}">
                                    <p:ajax event="itemSelect"
                                            listener="#{AgendaController.selectGrupo}" update=""/>
                                </p:autoComplete>
                            </b:column>
                        </p:outputPanel>
                    </b:row>

                    <b:row>
                        <p:outputPanel id="outEquipe">
                            <b:column span="5"
                                      class="label-position new-data-size new-comple1">
                                <b:label for="equipe" value="Equipe:" id="equipe" class="fire-label"
                                         rendered="#{InsercaoController.tipo == 'E'}" severity="info"/>

                                <p:autoComplete
                                        value="#{AlteracaoPacienteController.insercao.equipe}"
                                        readonly="true"
                                        size="31" converter="conEquipe" class="select-agendaEquipe4"
                                        rendered="#{AlteracaoPacienteController.tipo == 'E'}"
                                        disabled="#{AlteracaoPacienteController.insercao.grupo==null}"
                                        completeMethod="#{AlteracaoPacienteController.listaEquipeAutoComplete}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}"
                                        itemLabel="#{theme.descEquipe}">
                                    <p:ajax event="itemSelect" listener="#{InsercaoController.listarProfissionaisEquipe()}"/>
                                </p:autoComplete>

                                <p:commandButton icon="ui-icon-search"
                                                 update="dtEquipe, :msgPagina"
                                                 rendered="false"
                                                 action="#{AlteracaoPacienteController.listarProfissionaisEquipe()}"/>
                                <!-- rendered="#{AlteracaoPacienteController.tipo == 'E'}" -->
                            </b:column>

                            <b:column span="3" class="label-position5 carregar-margin">
                                <p:commandButton icon="ui-icon-search" immediate="true" process="@this"
                                                 value="Carregar Profissionais"
                                                 style="margin-top:20px; margin-bottom:10px;"
                                                 class="btn-acao-table acao-confirmar"
                                                 update="dtEquipe, :msgPagina"
                                                 rendered="false"
                                                 action="#{AlteracaoPacienteController.listarProfissionaisEquipe()}"/>
                                <!--rendered="#{AlteracaoPacienteController.tipo == 'E'}"-->
                            </b:column>
                            <b:column span="2">
                                <p:commandButton value="Visualizar" look="success" size="sm"
                                                 id="btnVisualizarAgendaEquipe" icon="ui-icon-search"
                                                 rendered="#{AlteracaoPacienteController.tipo == 'k'}"
                                                 class="btn-agendaBusca btn-acao-table acao-buscar"
                                                 update=":formQtdAgendamentos"
                                                 action="#{AlteracaoPacienteController.visualizarHorariosEquipe()}"
                                                 immediate="true" oncomplete="PF('dlgQtdAgendamentos').show();"/>
                            </b:column>
                        </p:outputPanel>
                    </b:row>
                    
                    <b:row>
						<p:outputPanel id="outCid">
							<b:column span="3"
								rendered="#{AlteracaoPacienteController.insercaoParaLaudo.laudo.id==null 
								and AlteracaoPacienteController.insercao.laudo.id == null}"
								class="label-position new-data-size new-comple1">
								<b:label value="CID:" severity="info" />

								<p:outputPanel>
									<p:autoComplete
										value="#{AlteracaoPacienteController.insercao.cid}" size="25"
										required="true" requiredMessage="CID: Campo Obrigatório"
										converter="conCid" id="descCid1" class="select-agendaEquipe4"
										completeMethod="#{AgendaController.listaCidAutoComplete}"
										effect="fade" var="theme" forceSelection="true"
										minQueryLength="1" itemValue="#{theme}" title="CID"
										itemLabel="#{theme.descCidAbrev}" />

									<p:commandButton id="btBusCid1" icon="ui-icon-search"
										update=":formConsulCid1" process="@this"
										oncomplete="PF('dlgConsulCid1').show();" />
								</p:outputPanel>
							</b:column>
						</p:outputPanel>
					</b:row>
                    <br />

                    <b:row>
                        <p:outputPanel id="outProf">

                            <b:column span="5"
                                      class="label-position new-data-size new-comple1">
                                <b:label value="Profissional" id="prof" class="fire-label"
                                         rendered="#{InsercaoController.tipo == 'P'}" severity="info"/>

                                <p:autoComplete
                                        rendered="#{AlteracaoPacienteController.tipo == 'P'}"
                                        value="#{AlteracaoPacienteController.insercao.funcionario}"
                                        size="31" converter="conFuncionario"
                                        class="select-agendaEquipe4"
                                        completeMethod="#{AlteracaoPacienteController.listaProfissionalAutoComplete}"
                                        effect="fade" var="theme" forceSelection="true"
                                        minQueryLength="1" itemValue="#{theme}"
                                        itemLabel="#{theme.nome}">
                                    <p:ajax event="itemSelect" update="outDetalhes"/>
                                </p:autoComplete>

                            </b:column>
                        </p:outputPanel>
                    </b:row>

                    <b:row>
                        <p:outputPanel id="outDetalhes">

                            <b:column span="2" class="label-position">
                                <b:label value="Especialidade:" severity="info" class="fire-label"
                                         rendered="#{AlteracaoPacienteController.tipo == 'P'}"/>

                                <h:outputLabel
                                        value="#{AlteracaoPacienteController.insercao.funcionario.especialidade.descEspecialidade}"
                                        rendered="#{AlteracaoPacienteController.tipo == 'P'}"
                                        class="campo-laudoDig"/>
                            </b:column>

                            <b:column span="2" class="label-position">
                                <b:label value="CNS:" severity="info" class="fire-label"
                                         rendered="#{AlteracaoPacienteController.tipo == 'P'}"/>

                                <h:outputLabel
                                        value="#{AlteracaoPacienteController.insercao.funcionario.cns}"
                                        rendered="#{AlteracaoPacienteController.tipo == 'P'}"
                                        class="campo-laudoDig"/>
                            </b:column>

                        </p:outputPanel>
                    </b:row>

                    <b:row>
                        <p:outputPanel id="outDias">
                            <b:column span="4" class="btn-radio-table">
                                <p:selectManyCheckbox layout="grid" columns="3" required="true"
                                                      rendered="#{AlteracaoPacienteController.tipo == 'P'}"
                                                      requiredMessage="Escolha ao menos um dia da semana!"
                                                      value="#{AlteracaoPacienteController.funcionario.listDiasSemana}">
                                    <f:selectItem itemLabel="Domingo" itemValue="1"/>
                                    <f:selectItem itemLabel="Segunda" itemValue="2"/>
                                    <f:selectItem itemLabel="Terça" itemValue="3"/>
                                    <f:selectItem itemLabel="Quarta" itemValue="4"/>
                                    <f:selectItem itemLabel="Quinta" itemValue="5"/>
                                    <f:selectItem itemLabel="Sexta" itemValue="6"/>
                                    <f:selectItem itemLabel="Sábado" itemValue="7"/>
                                </p:selectManyCheckbox>
                            </b:column>
                        </p:outputPanel>

                    </b:row>

                    <b:row>
                   
                    <b:column span="12">
 
                                                 </b:column>
                                                 </b:row>
                    <b:row>
                        
                            <b:column span="5" >
                                <p:dataTable id="dtEquipe" resizableColumns="true"
                                             rendered="#{AlteracaoPacienteController.tipo == 'E'}"
                                             responsive="true"
                                             value="#{AlteracaoPacienteController.listaProfissionaisEquipe}"
                                             var="func" emptyMessage="Sem registros.">

                                    <p:column headerText="Profissional" width="70">
                                        <h:outputLabel value="#{func.nome}"/>
                                    </p:column>

                                    <p:column headerText="Especialidade" width="25">
                                        <h:outputLabel value="#{func.especialidade.descEspecialidade}"/>
                                    </p:column>

                                    <p:column headerText="Adicionar" width="5">
                                        <div align="center">
                                            <p:commandButton icon="fa fa-fw fa-check" immediate="true"
                                                             title="Selecionar" class="new-btn-acao-table acao-editar"
                                                             actionListener="#{AlteracaoPacienteController.abrirDialog}"
                                                             update=":formDiasAtendimentoTurno">
                                                <f:setPropertyActionListener value="#{func}"
                                                                             target="#{AlteracaoPacienteController.funcionario}"/>
                                            </p:commandButton>
                                        </div>
                                    </p:column>

                                </p:dataTable>
                            </b:column>

                     <b:column span="1" style="float:right">
                      <p:tooltip id="toolTipFade" for="altdia" value="Permite alterar o dia de atendimento de todos os Profissionais, de uma única vez" position="top"/>
                     <p:commandButton value="Alterar Dia" look="success" style="float:right;" 
                                                icon="ui-icon-pencil"
                                                 rendered="true"
                                                id="altdia"
                                                 update=":formQtdAgendamentos"
                                                 action="#{AlteracaoPacienteController.abreDialogAlteraDiasAtendimentoProfissionais()}"/>
                     </b:column>

                            <b:column span="6" >
                            
                                <p:dataTable id="dtAdicionados" resizableColumns="true"
                                             rendered="#{AlteracaoPacienteController.tipo == 'E'}"
                                             responsive="true"
                                             value="#{AlteracaoPacienteController.listaProfissionaisAdicionados}"
                                             var="funcionario" emptyMessage="Sem registros.">

                                    <p:column headerText="Profissional" width="50">
                                        <h:outputLabel value="#{funcionario.nome}"/>
                                    </p:column>

                                    <p:column headerText="Especialidade" width="20">
                                        <h:outputLabel
                                                value="#{funcionario.especialidade.descEspecialidade}"/>
                                    </p:column>

                                    <p:column headerText="Dias de Atendimento" width="27">
                                        <h:outputLabel value="#{funcionario.diasSemana}"/>
                                    </p:column>

                                    <p:column headerText="Excluir" width="3">
                                        <div align="center">
                                            <p:commandButton icon="ui-icon-trash" immediate="true"
                                                             action="#{AlteracaoPacienteController.excluirFuncionarioIhDiasDeAtendimento()}"
                                                             title="Excluir" class="new-btn-acao-table acao-editar"
                                                             update=":formInsercao2:dtAdicionados">
                                                <f:setPropertyActionListener value="#{funcionario}"
                                                                             target="#{AlteracaoPacienteController.funcionario}"/>
                                            </p:commandButton>
                                        </div>
                                    </p:column>

                                </p:dataTable>
                            </b:column>
                        

                    </b:row>


                    <br></br>

                    <b:row>

                        <b:column span="11" class="label-position">
                            <b:label for="obs" value="Observação" severity="info" class="fire-label"/>

                            <b:inputTextarea id="obs" rows="1"
                                             value="#{AlteracaoPacienteController.insercao.observacao}"
                                             autoResize="false" class="select-agendaEquipe2">
                            </b:inputTextarea>
                        </b:column>

                    </b:row>

                    <b:row rendered="#{AlteracaoPacienteController.opcaoAtendimento == 'T'}">
                        <p:outputPanel>
                            <b:column span="3" class="label-position">
                                <b:label value="Turno:" severity="info" class="fire-label"/>

                                <b:selectOneMenu class="select-agendaEquipe2" disabled="true"
                                                 value="#{AlteracaoPacienteController.insercao.turno}">
                                    <f:selectItem itemLabel="Manhã" itemValue="M"/>
                                    <f:selectItem itemLabel="Tarde" itemValue="T"/>
                                </b:selectOneMenu>
                            </b:column>
                        </p:outputPanel>
                    </b:row>




                    <br></br>

                    <div align="center">

                        <p:commandButton value="Gravar" look="success" size="sm" id="b1"
                                         icon="ui-icon-check" update=":msgPagina"
                                         class="btn-incluir"
                                         action="#{AlteracaoPacienteController.gravarAlteracaoPaciente()}"/>

                        <p:commandButton value="Voltar" icon="ui-icon-arrowthick-1-w"
                                         size="sm" immediate="true" look="info" class="btn-voltar"
                                         action="/pages/sishosp/gerenciamentoPacientes.xhtml?faces-redirect=true">
                        </p:commandButton>

                    </div>
                </h:form>
            </div>
        </div>

        <p:dialog header="Dias de Atendimento" widgetVar="dlgDiasAtendimentoTurno" dynamic="true" responsive="true"
                  modal="true">
            <h:form id="formDiasAtendimentoTurno">
                <p:selectManyCheckbox layout="grid" columns="7" required="true"
                                      requiredMessage="Escolha ao menos um dia da semana!"
                                      value="#{AlteracaoPacienteController.funcionario.listDiasSemana}">
                    <f:selectItem itemLabel="Domingo" itemValue="1"/>
                    <f:selectItem itemLabel="Segunda" itemValue="2"/>
                    <f:selectItem itemLabel="Terça" itemValue="3"/>
                    <f:selectItem itemLabel="Quarta" itemValue="4"/>
                    <f:selectItem itemLabel="Quinta" itemValue="5"/>
                    <f:selectItem itemLabel="Sexta" itemValue="6"/>
                    <f:selectItem itemLabel="Sábado" itemValue="7"/>
                </p:selectManyCheckbox>

                <br></br>
                <br></br>

                <div align="center">
                    <p:commandButton value="Adicionar" style="margin-top:5px;"
                                     class="btn-acao-table acao-confirmar"
                                     update=":formInsercao2:dtAdicionados, :msgPagina"
                                     id="b2" icon="ui-icon-check"
                                     action="#{AlteracaoPacienteController.validarAdicionarFuncionario()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Quantidade de Agendamentos" styleClass="topDialog"
                  widgetVar="dlgQtdAgendamentos" modal="true" dynamic="true" responsive="true">
            <h:form id="formQtdAgendamentos">
                <p:dataTable id="dtAgendamentosEquipe" resizableColumns="true"
                             value="#{AlteracaoPacienteController.listaHorariosEquipe}" var="ag"
                             emptyMessage="Sem registros.">

                    <p:column headerText="Equipe">
                        <h:outputLabel value="#{ag.equipe.descEquipe}"/>
                    </p:column>

                    <p:column headerText="Manhã Segunda ">
                        <h:outputLabel value="#{ag.qtdAtendimentosManha[0]}"/>
                    </p:column>

                    <p:column headerText="Tarde Segunda">
                        <h:outputLabel value="#{ag.qtdAtendimentosTarde[0]}"/>
                    </p:column>

                    <p:column headerText="Manhã Terça ">
                        <h:outputLabel value="#{ag.qtdAtendimentosManha[1]}"/>
                    </p:column>

                    <p:column headerText="Tarde Terça">
                        <h:outputLabel value="#{ag.qtdAtendimentosTarde[1]}"/>
                    </p:column>

                    <p:column headerText="Manhã Quarta ">
                        <h:outputLabel value="#{ag.qtdAtendimentosManha[2]}"/>
                    </p:column>

                    <p:column headerText="Tarde Quarta">
                        <h:outputLabel value="#{ag.qtdAtendimentosTarde[2]}"/>
                    </p:column>

                    <p:column headerText="Manhã Quinta ">
                        <h:outputLabel value="#{ag.qtdAtendimentosManha[3]}"/>
                    </p:column>

                    <p:column headerText="Tarde Quinta">
                        <h:outputLabel value="#{ag.qtdAtendimentosTarde[3]}"/>
                    </p:column>

                    <p:column headerText="Manhã Sexta ">
                        <h:outputLabel value="#{ag.qtdAtendimentosManha[4]}"/>
                    </p:column>

                    <p:column headerText="Tarde Sexta">
                        <h:outputLabel value="#{ag.qtdAtendimentosTarde[4]}"/>
                    </p:column>

                </p:dataTable>

            </h:form>
        </p:dialog>

        <p:dialog header="Alteração Efetuada com Sucesso" styleClass="topDialog"
                  widgetVar="dlgAlteracaoEfetuada" modal="true" dynamic="true" closable="false">
            <h:form id="formAlteracaoEfetuada">

                <div align="center">
                    <p:commandButton value="Fechar" class="btn-fechar"
                                     look="info" ajax="true"
                                     action="#{GerenciarPacienteController.redirectGerenciamento}"
                                     icon="ui-icon-close"/>
                </div>

            </h:form>
        </p:dialog>
        
        
        <p:dialog header="Dias de Atendimento" widgetVar="dlgDiasAtendimentoHorario" width="600px"
                  modal="true" styleClass="topDialog">
            <h:form id="formDiasAtendimento">

                <p:growl id="grwDias"></p:growl>

                <b:row>

                    <b:column span="3" class="label-position">
                        <b:label value="Dias:" severity="info" class="fire-label"/>
                        <b:selectOneMenu required="true" class="select-agendaEquipe2"
                                         requiredMessage="Escolha ao menos um dia da semana!"
                                         value="#{AlteracaoPacienteController.insercao.horarioAtendimento.diaSemana}">
                            <f:selectItem itemLabel="Domingo" itemValue="1"/>
                            <f:selectItem itemLabel="Segunda" itemValue="2"/>
                            <f:selectItem itemLabel="Terça" itemValue="3"/>
                            <f:selectItem itemLabel="Quarta" itemValue="4"/>
                            <f:selectItem itemLabel="Quinta" itemValue="5"/>
                            <f:selectItem itemLabel="Sexta" itemValue="6"/>
                            <f:selectItem itemLabel="Sábado" itemValue="7"/>
                        </b:selectOneMenu>
                    </b:column>

                </b:row>

                <b:row>

                    <p:outputPanel>
                        <b:column span="3" class="label-position">
                            <b:label value="Horário:" severity="info" class="fire-label"/>

                            <b:selectOneMenu class="select-agendaEquipe2" required="true"
                                             requiredMessage="Horário: Campo obrigatório!"
                                             value="#{AlteracaoPacienteController.insercao.horarioAtendimento.horario}">
                                <f:selectItems
                                        value="#{AlteracaoPacienteController.listaHorarios}"/>
                            </b:selectOneMenu>
                        </b:column>
                    </p:outputPanel>

                </b:row>

                <div align="center">
                    <div align="center">
                        <p:commandButton value="Adicionar" style="margin-top:5px;"
                                         class="btn-acao-table acao-confirmar"
                                         update="formDiasAtendimento"
                                         id="btnAdicionarFuncionarioHorarioDia" icon="ui-icon-check"
                                         action="#{AlteracaoPacienteController.adicionarFuncionarioDiaHorario()}"/>
                    </div>
                </div>

                <br></br>

                <b:row>

                    <p:dataTable id="dtHorariosDias" resizableColumns="true"
                                 value="#{AlteracaoPacienteController.listaHorarioAtendimentos}" var="var"
                                 emptyMessage="Sem registros.">

                        <p:column headerText="Dia">
                            <h:outputLabel value="Domingo"
                                           rendered="#{var.diaSemana == 1}"/>
                            <h:outputLabel value="Segunda"
                                           rendered="#{var.diaSemana == 2}"/>
                            <h:outputLabel value="Terça"
                                           rendered="#{var.diaSemana == 3}"/>
                            <h:outputLabel value="Quarta"
                                           rendered="#{var.diaSemana == 4}"/>
                            <h:outputLabel value="Quinta"
                                           rendered="#{var.diaSemana == 5}"/>
                            <h:outputLabel value="Sexta"
                                           rendered="#{var.diaSemana == 6}"/>
                            <h:outputLabel value="Sábado"
                                           rendered="#{var.diaSemana == 7}"/>
                        </p:column>

                        <p:column headerText="Horário">
                            <h:outputLabel value="#{var.horario}"/>
                        </p:column>

                        <p:column headerText="Excluir" width="12%">
                            <div align="center">
                                <p:commandButton icon="ui-icon-trash" immediate="true"
                                                 actionListener="#{AlteracaoPacienteController.excluirDiasHorariosDoFuncionario(var)}"
                                                 title="Excluir" class="new-btn-acao-table acao-editar"
                                                 update="dtHorariosDias">
                                </p:commandButton>
                            </div>
                        </p:column>

                    </p:dataTable>

                </b:row>

                <br></br>
                <br></br>

                <div align="center">
                    <p:commandButton value="Salvar" style="margin-top:5px;"
                                     class="btn-acao-table acao-confirmar"
                                     update=":formInsercao2:dtAdicionados, :msgPagina"
                                     id="b2" icon="ui-icon-check" immediate="true"
                                     action="#{AlteracaoPacienteController.verificarAdicionarFuncionarioHorarioDia()}"/>
                </div>
            </h:form>
        </p:dialog>
        
        <p:dialog header="Consultar Laudos" widgetVar="dlgConsuLaudo"
			dynamic="true" modal="true" id="laudo-id">
			<h:form id="formConsuLaudo">

				<p:growl id="msgLaudo"></p:growl>

				<b:dataTable customLangUrl="#{resource['pt-br.json']}"
					value="#{AlteracaoPacienteController.listaLaudosVigentes}"
					id="dtLaudo" var="insercao" display="Nenhum Laudo">

					<h:column>
						<f:facet name="header">
                            Paciente
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.paciente.nome}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                            CNS
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.paciente.cns}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                            Vigência Inicial
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.vigenciaInicial}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</h:column>

					<h:column>
						<f:facet name="header">
                            Vigência Final
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.vigenciaFinal}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</h:column>

					<h:column rendered="false">
						<f:facet name="header">
                            Paciente
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.mesFinal}" />
					</h:column>

					<h:column rendered="false">
						<f:facet name="header">
                            Paciente
                        </f:facet>
						<p:outputLabel value="#{insercao.laudo.anoFinal}" />
					</h:column>

					<h:column>
						<f:facet name="header">
                            Adicionar
                        </f:facet>
						<p:commandButton update=":formInsercao, formConsuLaudo:msgLaudo :formInsercao2:outCid"
							icon="ui-icon-check" title="Selecionar"
							onclick="PF('dlgConsuLaudo').hide();"
							class="new-btn-acao-table acao-editar" 
							action="#{AlteracaoPacienteController.validaSelecaoLaudoPacienteSemLaudo()}"
							actionListener="#{AlteracaoPacienteController.limparCidInserido()}">
							<f:setPropertyActionListener value="#{insercao.laudo}"
								target="#{AlteracaoPacienteController.insercao.laudo}" />
						</p:commandButton>
					</h:column>
				</b:dataTable>
			</h:form>
		</p:dialog>
		
        <p:dialog header="Alterar Dia de Atendimento" widgetVar="dlgAlteraDiaAtendimento" width="300px"
                  modal="true" styleClass="topDialog">
            <h:form id="formAlteraDiaAtendimento">
		<p:autoUpdate/>
                <b:row>
                    <b:column span="3" class="label-position">
                        <b:label value="Dia:" severity="info" class="fire-label"/>
                        <b:selectOneMenu required="true" class="select-agendaEquipe2" style="width:200px"
                                         requiredMessage="Escolha o dia da semana!"
                                         value="#{AlteracaoPacienteController.insercao.horarioAtendimento.diaSemana}">
							<f:selectItem itemLabel="Selecione o Dia" itemValue=""/>
                            <f:selectItem itemLabel="Domingo" itemValue="1"/>
                            <f:selectItem itemLabel="Segunda" itemValue="2"/>
                            <f:selectItem itemLabel="Terça" itemValue="3"/>
                            <f:selectItem itemLabel="Quarta" itemValue="4"/>
                            <f:selectItem itemLabel="Quinta" itemValue="5"/>
                            <f:selectItem itemLabel="Sexta" itemValue="6"/>
                            <f:selectItem itemLabel="Sábado" itemValue="7"/>
                        </b:selectOneMenu>
                    </b:column>
                </b:row>
                <br />
                <br />

                <div align="center">
                    <p:commandButton value="Confirmar" 
                                     class="acao-confirmar" style="float:left"
                                     update=":formInsercao2:dtAdicionados, :msgPagina"
                                     id="b2" icon="ui-icon-check" 
                                     action="#{AlteracaoPacienteController.alteraDiaAtendimentoProfissionaisNaLista(AlteracaoPacienteController.insercao.horarioAtendimento.diaSemana)}"/>
                                     
                                       <p:commandButton value="Fechar" class="acao-cancelar" 
                                     oncomplete="PF('dlgAlteraDiaAtendimento').hide();" look="info" ajax="true"
                                     icon="ui-icon-close" style="margin-left:5px;float:right;"/>
                </div>
            </h:form>
        </p:dialog>

		<p:dialog header="Consultar CID 1" widgetVar="dlgConsulCid1"
			responsive="true" height="350" modal="true" dynamic="true">
			<h:form id="formConsulCid1">
				<p:outputPanel id="outcid1">
					<p:row>
						<p:panelGrid columns="4">

							<p:selectOneMenu value="#{AgendaController.tipoBusca}"
								style="margin-top: -13px">
								<f:selectItem itemLabel="Descrição ou CID" itemValue="desccid" />
							</p:selectOneMenu>

							<p:inputText value="#{AgendaController.campoBusca}"
								required="true"
								requiredMessage="Informe a descrição da doença ou o Código do CID"
								placeholder="Digite aqui a busca" style="margin-left: 10px;" />

							<p:commandButton
								action="#{AgendaController.listarCids(AgendaController.campoBusca)}"
								update="tabelacid1 msgPagina" icon="ui-icon-search"
								style="margin-left: 10px;">
							</p:commandButton>
						</p:panelGrid>
					</p:row>

					<p:dataTable emptyMessage="Nenhum CID listado" rows="10"
						paginator="true" id="tabelacid1" style="width:500px"
						value="#{AgendaController.listaCids}" var="tab">

						<p:column headerText="Descrição">
							<h:outputText value="#{tab.descCidAbrev}" />
						</p:column>

						<p:column headerText="CID">
							<h:outputText value="#{tab.cid}" />
						</p:column>

						<p:column headerText="Ação">
							<p:commandButton tooltip="Selecionar" icon="fa fa-fw fa-check"
								size="sm" onclick="PF('dlgConsulCid1').hide();"
								class="new-btn-acao-table acao-editar"
								update=":formInsercao2:outCid">
								<f:setPropertyActionListener value="#{tab}"
									target="#{AlteracaoPacienteController.insercao.cid}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</p:outputPanel>
			</h:form>
		</p:dialog>
	</ui:define>

</ui:composition>