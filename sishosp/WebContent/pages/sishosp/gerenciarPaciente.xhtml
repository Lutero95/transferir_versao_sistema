<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui"
    xmlns:stella="http://stella.caelum.com.br/faces2"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:composition template="../../template/templatepagsistemas.xhtml">

        <ui:define name="body">
               <!-- INICIO DO FORMULARIO -->
    <div class="col-md-8">
        <h3>GERENCIAMENTO DE PACIENTES</h3>
        <br />
       </div>
        <h:form id="frmmensagem">
        
        
        
                <p:toolbar>

                    <p:toolbarGroup>


                        <h:panelGrid columns="7" style="font-size:12px !important;">
                        <p:outputPanel autoUpdate="true">
                        <p:outputLabel value="Pesquisa: "/>
						<p:inputText value="#{PacienteController.paciente.nome}" id="campoBusca"/>
						<p:commandButton value="Buscar" actionListener="#{PacienteController.limparDados()}"
						icon="ui-icon-search"
						action="#{PacienteController.buscarescolaridade()}" />
						<p:commandButton value="Limpar Busca" actionListener="#{PacienteController.limparDados()}"
						style="margin-left:20px"/>
						<br/>

                           <!--  <p:commandButton id="btninc" value="Novo"
                                             action="#{clienteController.limpaobj()}" update=":frminc:pnlinc"
                                             oncomplete="PF('dlginc').show()" icon="ui-icon-plus" disabled="#{MBUsuarios.verificarPermComp('FC-67', MBUsuarios.sistemaLogado.id) == false}">
                                <f:setPropertyActionListener value="I"
                                                             target="#{clienteController.tipo}" />
                                <p:tooltip for="btninc" value="Incluir"></p:tooltip>
                            </p:commandButton>   

                            <p:commandButton id="btnalt" value="Alterar"
                                             style="margin-left:10px" update=":frminc:pnlinc"
                                             action="#{clienteController.alteraCliente()}"
                                             icon="ui-icon-wrench">
                                <f:setPropertyActionListener value="A"
                                target="#{clienteController.tipo}" />
                                <p:tooltip for="btnalt" value="Alterar"></p:tooltip>
                            </p:commandButton>


                            <p:commandButton icon="ui-icon-closethick" value="Excluir"
                                             style="margin-left:10px" id="btnexc"
                                             action="#{clienteController.acaoExcluir()}">
                                <p:tooltip for="btnexc" value="Excluir"></p:tooltip>
                            </p:commandButton>-->

						</p:outputPanel>
                        </h:panelGrid>

                    </p:toolbarGroup>
                    <p:toolbarGroup align="right">

                    </p:toolbarGroup>

                </p:toolbar>




                <p:dataTable emptyMessage="Sem Dados" id="tabela"
                             style="margin-top:20px;" value="#{PacienteController.listaPacientes}"
                             var="tab" paginator="true" paginatorPosition="bottom" rows="12"
                             selectionMode="single" selection="#{PacienteController.paciente}"
                             rowKey="#{tab.id_paciente}">

                    <!--  <p:ajax event="rowSelect" oncomplete="PF('dlgacoes').show();"
                            listener="#{PacienteController.onRowSelect}" />-->

                    <p:column headerText="Cód." style="font-weight:bold;width:5%;">
                        <h:outputText value="#{tab.id_paciente}" />
                    </p:column>

                    <p:column headerText="Nome" style="font-weight:bold;">
                        <h:outputText value="#{tab.nome}" />
                    </p:column>
                      <p:column headerText="CPF/CNPJ" style="font-weight:bold;">
                        <h:outputText value="#{tab.cpf}" />
                    </p:column>
                    <p:column headerText="RG" style="font-weight:bold;">
                        <h:outputText value="#{tab.rg}" />
                    </p:column>
                    
                    <p:column headerText="Ações" width="15%">
                            <center>
                                <p:splitButton icon="confirmar">
                                    <p:menuitem value="Alterar" icon="alterar-dados"  
                                        onclick="PF('dlgAltPaciente').show()">
                      <!-- actionListener="#{perfilMB.limparDados()}" update=":formAP:pnlAP" process="@this, :formAP" -->
                                        <f:setPropertyActionListener value="#{tab}" target="#{PacienteController.paciente}" />
                                       
                                    </p:menuitem>
                                    
                                    <p:menuitem value="Excluir" icon="trash" 
                                        onclick="PF('dialogAtencao').show()">

                                        <f:setPropertyActionListener value="#{tab.id_paciente}" target="#{PacienteController.paciente.id_paciente}" />
                                    </p:menuitem>
                                </p:splitButton>   
                            </center>
                        </p:column>
                </p:dataTable>

            </h:form>

            <p:dialog widgetVar="dialogAtencao" modal="true" header="Atenção"
                      resizable="false">

<h:form id="dlgexcluir">
                <h:panelGrid columns="1">


                    <div class="alert alert-warning" role="alert">Deseja excluir
                        este Paciente?</div>

                </h:panelGrid>



                <center>

                    <p:commandButton value="Sim" 
                                     action="#{PacienteController.excluirPaciente()}"
                                     icon="ui-icon-check" style="font-size:14px;" update=":frmmensagem:tabela">
                    </p:commandButton>

                    <p:commandButton value="Não" onclick="PF('dialogAtencao').hide();"
                                     icon="ui-icon-closethick" style="font-size:14px;margin-left:5px;"></p:commandButton>

                </center>


</h:form>
            </p:dialog>
        
    
        </ui:define>
    </ui:composition>
</html>