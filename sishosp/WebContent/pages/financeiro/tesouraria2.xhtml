<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="../../template/templategeral.xhtml">
        <ui:define name="body">

<!--  -->
            <p:layout style="min-width:400px;width:99%;height:600px;">
                <p:layoutUnit position="west" resizable="false" size="240" 
                              minSize="40">
                    <h:form id="frmbanco">
                        <center>
                            <div style="background-color:white;height:100%">
                            <p:outputPanel  id="pnlTabelaGeral">
                            <p:autoUpdate/>
                                <p:dataTable emptyMessage="Nenhum Banco" id="tabela" 
                                             value="#{tesourariaController.listabancos}" var="m"
                                             scrollable="true" style="width:99%" scrollRows="8"
                                             selectionMode="single" selection="#{tesourariaController.banco}"
                                             rowKey="#{m.id}" scrollHeight="230" scrollWidth="220">

                                    <p:ajax event="rowSelect" disabled="#{tesourariaController.caixa.status=='F'}"
                                            listener="#{tesourariaController.onBancoSelect}" update=":frmmov:tabmov"
                                            />

                                    <p:column style="text-align: center;">

                                        <h:outputText value="#{m.banco}" />

                                    </p:column>

                                </p:dataTable>
                                </p:outputPanel>
                            </div>
                        </center>
                        <center>



                        </center>
                    </h:form>

                    <div style="background-color:Cornsilk;height:350px">
                        <p:outputPanel id="outcaixa">
                            <center>
                                <br/>
                                <p:commandButton label="Abrir Caixa" value="Abrir Caixa" icon="ui-icon-unlocked" 
                                    rendered="#{tesourariaController.caixa.status=='F'}" 
                                    oncomplete="PF('dlgabrecaixa').show()" update="grwgeral" 
                                    disabled="#{MBUsuarios.verificarPermComp('FC-56', MBUsuarios.sistemaLogado.id) == false}">

                                </p:commandButton>
                                <p:commandButton label="Fechar Caixa" value="Fechar Caixa" icon="ui-icon-locked" 
                                    rendered="#{tesourariaController.caixa.status=='A'}" 
                                    oncomplete="PF('dlgfechacaixa').show()" update="grwgeral" 
                                    disabled="#{MBUsuarios.verificarPermComp('FC-57', MBUsuarios.sistemaLogado.id) == false}">

                                </p:commandButton>
                            </center>
                        </p:outputPanel>
                        <br/>


                    </div>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                    <h:form id="frmmov">
                        <p:tabView id="tabmov">
                            <p:tab title="Movimentação" >
                                    <p:dataTable emptyMessage="Nenhuma Movimentação" 
                                                 value="#{tesourariaController.listamovimentacao}" var="m"
                                                 style="width:99%" scrollRows="8"
                                                 scrollable="true"
                                                 scrollHeight="230" id="tabelaMov" >

                                        <p:column style="text-align: center;" headerText="Data Movim." >

                                            <h:outputText value="#{m.dtmovimento}">
                                            	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>

                                        </p:column>


                                        <p:column style="text-align: center;" headerText="CD/DB">

                                            <h:outputText value="#{m.tipo}" />

                                        </p:column>

                                        <p:column style="text-align: center;" headerText="Valor">

                                            <h:outputText value="#{m.valor}" />

                                        </p:column>		

                                        <p:column style="text-align: center;" headerText="Complemento">

                                            <h:outputText value="#{m.complemento}" />

                                        </p:column>	

                                        <p:column style="text-align: center;" headerText="Cód. Receber">

                                            <h:outputText value="#{m.codreceber}" />

                                        </p:column>

                                        <p:column style="text-align: center;" headerText="Cód. Pagar">

                                            <h:outputText value="#{m.codpagar}" />

                                        </p:column>		

                                        <p:column style="text-align: center;" headerText="Operador">

                                            <h:outputText value="#{m.func.codFunc}" />

                                        </p:column>															

                                    </p:dataTable>
                            </p:tab>

                            <p:tab title="cheques Emitidos" id="tabchq">
                                <p:outputPanel  id="outchqemit">

<p:autoUpdate/>
                                    <p:dataTable emptyMessage="Nenhum Cheque" 
                                                 value="#{tesourariaController.listachequesemitidos}" var="m"
                                                 style="width:100%" scrollable="true" scrollRows="8"
                                                 selectionMode="single" selection="#{tesourariaController.rowCheque}"
                                                 rowKey="#{m.codcheque}" scrollHeight="230" id="tabComp" >
										
					                    <p:ajax event="rowSelect"
					                        listener="#{tesourariaController.onRowSelect}">
					                    </p:ajax>

                                        <p:column style="text-align: center;" headerText="Compensado" >

                                            <h:outputText value="#{m.compensado}" />

                                        </p:column>


                                        <p:column style="text-align: center;" headerText="Status">

                                            <h:outputText value="#{m.status}" />

                                        </p:column>

                                        <p:column style="text-align: center;" headerText="Num. Cheque">

                                            <h:outputText value="#{m.numcheque}" />

                                        </p:column>		

                                        <p:column style="text-align: center;" headerText="Valor">

                                            <h:outputText value="#{m.valor}" />

                                        </p:column>	

                                        <p:column style="text-align: center;" headerText="Emissão">

                                            <h:outputText value="#{m.dtemissao}" >
                                            	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>

                                        </p:column>

                                        <p:column style="text-align: center;" headerText="Vencimento">

                                            <h:outputText value="#{m.dtvencimento}" >
                                            	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>

                                        </p:column>		



                                        <p:column style="text-align: center;" headerText="Dt. Compensado">

                                            <h:outputText value="#{m.dtcompensado}" >
                                            	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>

                                        </p:column>																								

                                    </p:dataTable>
                                </p:outputPanel>

                                <p:outputPanel >
                                <p:autoUpdate/>
                                <p:commandButton value="Compensar" oncomplete="PF('dlgcomp').show()" style="width:100px" 
                                	disabled="#{tesourariaController.idSelecionado == 0 or tesourariaController.rowCheque.compensado == 'S' 
                                            or MBUsuarios.verificarPermComp('FC-58', MBUsuarios.sistemaLogado.id) == false}" />
                                
                                <p:commandButton value="Cancelar" style="margin-left:10px;width:100px" />
                                	</p:outputPanel>
			
                                <br/>

                            </p:tab>

                            <p:tab title="cheques Recebidos">

                            </p:tab>


                        </p:tabView>

                        <p:outputPanel >
                        <p:autoUpdate/>
                            <div style="background-color:Snow;width:100%">
                                <div style="background-color:Snow;width:15%">
                                    <center>
                                        <p:commandButton label="Emitir Cheque" value="Emitir Cheque" style="width:120px"
                                         rendered="#{tesourariaController.banco.contaCaixa == 'N'}" onclick="PF('dlgchqemi').show()"
                                         actionListener="#{tesourariaController.setarCheque()}" process="@this" 
                                         disabled="#{MBUsuarios.verificarPermComp('FC-59', MBUsuarios.sistemaLogado.id) == false}">
                                        </p:commandButton>
                                        
                                        <br/>
                                        <br/>
                                        <p:commandButton label="Débito em Conta" value="Débito em Conta" style="width:120px"
                                        rendered="#{tesourariaController.banco.contaCaixa == 'N'}" onclick="PF('dlgchqemi').show();" 
                                        actionListener="#{tesourariaController.setarDebito()}" process="@this" 
                                        disabled="#{MBUsuarios.verificarPermComp('FC-60', MBUsuarios.sistemaLogado.id) == false}" />
                                        
                                        <br/>
                                        <br/>
                                        <p:commandButton label="Pagamento" value="Pagamento" style="width:120px"
                                        rendered="#{tesourariaController.banco.contaCaixa == 'S'}" onclick="PF('dlgchqemi').show();" 
                                         actionListener="#{tesourariaController.setarDebito()}" process="@this" 
                                         disabled="#{MBUsuarios.verificarPermComp('FC-61', MBUsuarios.sistemaLogado.id) == false}"/> 
                                        <br/>
                                        <br/>
                                        
                                        <br/>
                                        <br/>
                                        <p:commandButton label="Gravar Lançamento" value="Gravar Lançamento" 
                                        rendered="#{tesourariaController.banco.id != null}"
                                        actionListener="#{tesourariaController.novoLancamento}" style="width:120px" onclick="PF('dlglancto').show()" 
                                        disabled="#{MBUsuarios.verificarPermComp('FC-62', MBUsuarios.sistemaLogado.id) == false}">

                                        </p:commandButton>
                                        <br/>		
                                        <br/>
                                        <p:commandButton label="Gravar Acerto" style="width:120px" 
                                        rendered="#{tesourariaController.banco.id != null}"
                                        value="Gravar Acerto" action="#{tesourariaController.abreCaixa}" 
                                        disabled="#{MBUsuarios.verificarPermComp('FC-63', MBUsuarios.sistemaLogado.id) == false}">

                                        </p:commandButton>
                                    </center>
                                </div>
                                <br/>
                                <div style="background-color: Snow;width:85%;float:right;margin-top:-120px">
                                    <h:outputText value="#{tesourariaController.banco.banco}"  style="font-size:16px;font-weight:bold"/>
                                    <br/>
                                    <h:outputText value="Saldo Anterior: #{tesourariaController.saldoinicial}"  style="font-size:16px;font-weight:bold">
										<f:convertNumber type="currency" currencySymbol="R$ "/>
                                    </h:outputText>
                                    <br/>
                                    <h:outputText value="Créditos: #{tesourariaController.creditos}"  style="font-size:16px;font-weight:bold">
                                    	<f:convertNumber type="currency" currencySymbol="R$ "/>
                                    </h:outputText>
                                    <br/>
                                    <h:outputText value="Débitos: #{tesourariaController.debitos}" style="font-size:16px;font-weight:bold">
                                    	<f:convertNumber type="currency" currencySymbol="R$ "/>
                                    </h:outputText>
                                    <br/>
                                    <h:outputText value="SALDO ATUAL: #{tesourariaController.saldohoje}" style="font-size:16px;font-weight:bold">
                                    	<f:convertNumber type="currency" currencySymbol="R$ " maxFractionDigits="2"/>
                                    </h:outputText>
                                    <br/>

                                </div>




                            </div>


                        </p:outputPanel>

                    </h:form>

                </p:layoutUnit>
            </p:layout>
            <p:dialog responsive="true"    widgetVar="dlgabrecaixa" header="Abrir Caixa" resizable="false"
                      height="100px" width="250px" modal="true">
                <h:form id="frmabrecaixa">
                    <h:outputText value="Deseja abrir o Caixa?" />
                    <br/>
                    <br/>
                    <center>
                        <p:commandButton icon="ui-icon-confirm" value="Confirmar"
                                         action="#{tesourariaController.abreCaixa}" update=":grwgeral :outcaixa :frmbanco:tabela" />
                        <p:commandButton icon="ui-icon-confirm" value="Cancelar" style="margin-left:10px"
                                         onclick="PF('dlgabrecaixa').hide()" />
                    </center>
                </h:form>
            </p:dialog>

            <p:dialog responsive="true"    widgetVar="dlgfechacaixa" header="Fechar Caixa" resizable="false"
                      height="100px" width="250px" modal="true">
                <h:form id="frmfechacaixa">
                    <h:outputText value="Deseja fechar o Caixa?" />
                    <br/>
                    <br/>
                    <center>
                        <p:commandButton icon="ui-icon-confirm" value="Confirmar"
                                         action="#{tesourariaController.fechaCaixa}" update=":grwgeral :outcaixa :frmbanco:tabela"  />
                        <p:commandButton icon="ui-icon-confirm" value="Cancelar" style="margin-left:10px"
                                         onclick="PF('dlgabrecaixa').hide()" />
                    </center>
                </h:form>
            </p:dialog>

            <p:dialog responsive="true"    widgetVar="dlgchqemi" header="Dados do Cheque Emitido" resizable="false"
                      height="400px" width="800px" modal="true">
                <h:form id="frmemitechq">
                    <p:outputPanel  >
                    <p:autoUpdate/>
                        <p:panelGrid style="width:400px" styleClass="semBorda">
                            <p:row>
                                <p:column>
                                    <h:outputText value="Banco: #{tesourariaController.banco.descricao} " />
                                </p:column>
                            </p:row>
                            </p:panelGrid>
                            <p:panelGrid columns="2" styleClass="semBorda">
                                    <h:outputText value="Emissão:" />
                                    <p:calendar value="#{tesourariaController.cheque.dtemissao}" required="true"
                                    requiredMessage="Informe a data de emissão." showOn="button" pattern="dd/MM/yyyy" locale="pt"/>
                               
                                    <h:outputText value="Nominal:" rendered="#{tesourariaController.tipoDocumento == 'CP'}"/>
                                    <p:inputText value="#{tesourariaController.cheque.nominal}" rendered="#{tesourariaController.tipoDocumento == 'CP'}"/>
                            
                                    <h:outputText value="Número Cheque:" rendered="#{tesourariaController.tipoDocumento == 'CP'}" />
                                    <h:outputText value="Processo:" rendered="#{tesourariaController.tipoDocumento == 'CC' and tesourariaController.operacao != 1}" />
                                   	<h:outputText value="Processo: #{tesourariaController.sequenciaCheque}" 
                                    rendered="#{tesourariaController.operacao == 1}" />
                                     
                                    <p:inputText value="#{tesourariaController.cheque.numcheque}" 
                                    rendered="#{tesourariaController.banco.contaCaixa == 'N'}" required="true"
                                    requiredMessage="Informe o número do Cheque/Processo"/>
                          
                                    <h:outputText value="Vencimento:" />
                                    <p:calendar value="#{tesourariaController.cheque.dtvencimento}" pattern="dd/MM/yyyy"
                                    rendered="#{tesourariaController.banco.contaCaixa == 'N'}" required="true"
                                    requiredMessage="Informe a data de vencimento." showOn="button" locale="pt"/>
                                     <h:outputText value="#{tesourariaController.dataAtual()}" rendered="#{tesourariaController.operacao == 1}">
									<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime> 
								</h:outputText>
								
								<p:commandButton icon="ui-icon-plus" value="Compensação de Título" onclick="PF('dlgbuscatit').show()"
									update=":frmbuscatit:tabelaTodosAbertos"/>
                           
                        </p:panelGrid>
                        <center><h:outputText value="Títulos Selecionados"/></center>
                        <p:outputPanel >
                        <p:autoUpdate/>
                        <p:dataTable emptyMessage="Nenhum Título" style="font-size: 11px;" 
                                     value="#{tesourariaController.listatitulosbaixar}"
                                     var="tit" id="tabtit" paginator="true" rows="5" 
                                     paginatorPosition="bottom"  paginatorAlwaysVisible="true">
                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;width:10px" value="Código" />
                                </f:facet>
                                <center>
                                <h:outputText value="#{tit.codigo}"></h:outputText>
                                </center>
                            </p:column>
                            <p:column headerText="Vencimento">
                            <center>
                                <h:outputText value="#{tit.dtvcto}" >                    
                                	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                </center>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                <center>
                                    <h:outputText style="font-size: 11px;" value="Documento" />
                                    </center>
                                </f:facet>

                                <h:outputText value="#{tit.duplicata}">
                                </h:outputText>
                            </p:column>
                            <p:column >
                                <f:facet name="header">
                                <center>
                                    <h:outputText style="font-size: 11px;" value="Parcela" />
                                </center>
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.parcela}">
                                </h:outputText>
                            	</center>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <center>
                                    <h:outputText style="font-size: 11px;" value="Valor">
                                    <f:convertNumber type="currency"/>
                                    </h:outputText>
                                </center>
                                </f:facet>

                                <h:outputText value="#{tit.titulobaixa.valorpago}">
                                </h:outputText>
                            </p:column>

                         

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Previsão" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.dtprevisao}">                               
                                </h:outputText>
                                </center>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Emissão" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.dtemissao}">                                
                                   	<f:convertDateTime pattern="dd/MM/yyyy"/>                                            								                               
                                </h:outputText>
                                </center> 
                            </p:column>					
                            <p:column style="margin: 0 -10 0 -10 !important;">
                                <center>
                                    <f:facet name="header">
                                        <h:outputText style="font-size: 11px; text-align: center; "
                                                      value="Ação" />
                                    </f:facet>
                                </center>

                                <center>
                                    
                                    
                                    <p:commandButton style="font-size: 11px;" value="Remover" 
                                     actionListener="#{tesourariaController.removerTitulo()}"
                                     update="frmemitechq:tabtit"
                                     icon="ui-icon-check" process="@this">
                                    <f:setPropertyActionListener value="#{tit}"
                                       target="#{tesourariaController.tituloselecionado}" />                                    
                                    </p:commandButton>
                                    

                                </center>

                            </p:column>

                        </p:dataTable>
                        </p:outputPanel>

                        <center>
                            <p:commandButton icon="ui-icon-check" value="Confirmar" style="margin-left:10px"
                                             action="#{tesourariaController.compensaTitulosPagar()}" update=":grwgeral, :frmbanco:tabela, :frmmov:tabmov:tabelaMov"
                                              />
                                             <p:commandButton icon="ui-icon-close" value="Desistir" style="margin-left:10px"
                                             onclick="PF('dlgchqemi').hide()"/>
                        </center>
                    </p:outputPanel>
                </h:form>
            </p:dialog>		




            <p:dialog responsive="true"    id="dlgtit" widgetVar="dlgbuscatit" modal="true" resizable="false"
                      height="370" width="780">

                <f:facet name="header">
                    <h:outputText value="Pesquisa títulos" />
                </f:facet>
                <h:form id="frmbuscatit">
                    <p:outputPanel id="outtit">
                        <p:panelGrid styleClass="semBorda">
                            <p:row>
                                <p:column>
                                    <h:outputText value="Fornecedor"></h:outputText>	
                                </p:column>

                            </p:row>

                            <p:row>
                                <p:column>

                                    <p:commandButton icon="ui-icon-search" process="@this"
                                                     style="margin-right:3px;" update=":frmforn:outforn"
                                                     onclick="PF('dlgbuscaforn').show();"></p:commandButton>

                                    <p:inputText size="30" onclick="PF('dlgbuscaforn').show();"
                                                 value="#{tesourariaController.forn.fantasia}" 
                                                 ></p:inputText>
                                </p:column>

                              
                               
                            </p:row>
                        </p:panelGrid>
                        
                       <p:dataTable emptyMessage="Nenhum Título" style="font-size: 11px;" 
                            value="#{tesourariaController.listaTitulosAberto()}"
                            var="tit" id="tabelaTodosAbertos" paginator="true"
                            paginatorPosition="bottom" rows="5" paginatorAlwaysVisible="true">
                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;width:10px" value="Código" />
                                </f:facet>
                                <center>
                                <h:outputText value="#{tit.codigo}"></h:outputText>
                            	</center>
                            </p:column>
                            <p:column headerText="Vencimento">
                            <center>
                                <h:outputText value="#{tit.dtvcto}" >                                
                                	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                               </center>
                               </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Documento" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.duplicata}">
                                </h:outputText>
                                </center>
                            </p:column>
                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Parcela" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.parcela}">
                                </h:outputText>
                                </center>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Valor" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.valor}">
                                </h:outputText>
                                </center>
                            </p:column>

                         

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Previsão" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.dtprevisao}">
                                  	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                </center>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText style="font-size: 11px;" value="Emissão" />
                                </f:facet>
								<center>
                                <h:outputText value="#{tit.dtemissao}">
                                	<f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                                </center>
                            </p:column>				
                            <p:column style="margin: 0 -10 0 -10 !important;">
                                <center>
                                    <f:facet name="header">
                                        <h:outputText style="font-size: 11px; text-align: center; "
                                                      value="Ação" />
                                    </f:facet>
                                </center>

                                <center> 
                                    <p:commandButton style="font-size: 11px;" value="Seleciona"
                                          oncomplete="PF('dlgbuscatit').hide();PF('dlgliqtitchq').show()" 
                                          action="#{tesourariaController.calcularValorAberto()}"
                                          process="@this"
                                          update=":frmtitchq:outtit" icon="ui-icon-check" >

	                                     <f:setPropertyActionListener value="#{tit}" 
	                                     	target="#{tesourariaController.tituloselecionado}" />
                                    </p:commandButton>
                                </center>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>



                    <br />

                </h:form>
            </p:dialog>


            <p:dialog responsive="true"    id="dlgforn" widgetVar="dlgbuscaforn" modal="true" resizable="false"
                      height="370" width="750">

                <f:facet name="header">
                    <h:outputText value="Pesquisa Fornecedores" />
                </f:facet>
                <h:form id="frmforn">

                    <p:panelGrid columns="5" styleClass="semBorda">
                        <h:outputText style="font-size: 14px;" value="Nome " />
                        <p:inputText style="width: 250px; font-size: 14px;" size="30"
                                     id="searchnome" value="#{fornecedorController.func.nome}" />
                        <h:outputText style="font-size: 14px;" value="CPF/CNPJ" />
                        <p:inputMask mask="" style="width: 120px; font-size: 14px;" size="30"
                                     id="searchcnpj" value="#{fornecedorController.func.cnpj}" />

                        <p:commandButton style="font-size: 14px" icon="ui-icon-search"
                                         action="#{fornecedorController.buscarFornecedores()}" update="outforn">

                        </p:commandButton>
                    </p:panelGrid>
                    <p:outputPanel id="outforn">

                        <p:dataTable emptyMessage="Nenhum Fornecedor" style="font-size: 12px; "
                                     paginatorPosition="bottom" value="#{fornecedorController.listafornecedores}"
                                     var="forn" paginator="true" rows="7">
                            <p:column width="40">
                                <f:facet name="header">
                                    <h:outputText style="font-size: 14px;" value="Código" />
                                </f:facet>
                                <h:outputText value="#{forn.codforn}"></h:outputText>
                            </p:column>
                            <p:column width="200">
                                <f:facet name="header">
                                    <h:outputText style="font-size: 14px;" value="Nome" />
                                </f:facet>

                                <h:outputText value="#{forn.nome}">
                                </h:outputText>
                            </p:column>
                            <p:column width="200">
                                <f:facet name="header">
                                    <h:outputText style="font-size: 14px;" value="Fantasia" />
                                </f:facet>

                                <h:outputText value="#{forn.fantasia}">
                                </h:outputText>
                            </p:column>
                            <p:column width="80" style="text-align:center;">
                                <f:facet name="header">
                                    <h:outputText style="font-size: 14px;" value="CNPJ" />
                                </f:facet>
                                <h:outputText value="#{forn.cnpj}">
                                </h:outputText>
                            </p:column>

                            <p:column width="90" style="margin: 0 -10 0 -10 !important;">
                                <center>
                                    <f:facet name="header">
                                        <h:outputText style="font-size: 14px; text-align: center; "
                                                      value="Ação" />
                                    </f:facet>
                                </center>

                                <center>
                                    <p:commandButton style="font-size: 12px;"
                                                     value="Confirmar"
                                                     oncomplete="PF('dlgbuscaforn').hide();"  update=":frmbuscatit:outtit" icon="ui-icon-check">

                                        <f:setPropertyActionListener value="#{forn}"
                                                                     target="#{tesourariaController.forn}"></f:setPropertyActionListener>

                                    </p:commandButton>

                                </center>

                            </p:column>

                        </p:dataTable>


                    </p:outputPanel>



                    <br />

                </h:form>
            </p:dialog>



            <p:dialog responsive="true"    id="liqtitchq" widgetVar="dlgliqtitchq" modal="true" resizable="false"
                      height="370" width="300">

                <f:facet name="header">
                    <h:outputText value="Pesquisa títulos" />
                </f:facet>
                <h:form id="frmtitchq">
                    <p:outputPanel id="outtit">
                    <p:autoUpdate/>
                        <p:panelGrid styleClass="semBorda">
                            <p:row>
                                <p:column>
                                    <h:outputText value="Valor em Aberto"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{tesourariaController.tituloselecionado.valoraberto}"/>

                                </p:column>


                            </p:row>
                            <p:row>
                                <p:column>
                                    <h:outputText value="Desconto"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{tesourariaController.tituloselecionado.titulobaixa.vlrdesc}">
                                        <p:ajax listener="#{tesourariaController.calculasaldoPagar()}" event="blur"/>
                                    </p:inputText>

                                </p:column>


                            </p:row>
                            <p:row>
                                <p:column>
                                    <h:outputText value="Juros"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{tesourariaController.tituloselecionado.titulobaixa.vlrjuros}">
                                        <p:ajax listener="#{tesourariaController.calculasaldoPagar()}" event="blur"/>
                                    </p:inputText>

                                </p:column>


                            </p:row>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Multa"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{tesourariaController.tituloselecionado.titulobaixa.vlrmulta}" >
                                        <p:ajax listener="#{tesourariaController.calculasaldoPagar()}" event="blur"/>
                                    </p:inputText>

                                </p:column>


                            </p:row>
                            <p:row>
                                <p:column colspan="2">
                                    <p:selectOneRadio style="font-size:10px" id="console" label="Tipo da Baixa"
                                     value="#{tesourariaController.tituloselecionado.titulobaixa.tpbaixa}" required="true"
                                     requiredMessage="Informe qual o tipo da baixa.">
                                        <f:selectItem itemLabel="Total/Final" itemValue="1"  />
                                        <f:selectItem itemLabel="Parcial" itemValue="2" />
                                    </p:selectOneRadio>



                                </p:column>
                            </p:row>
							
                            <p:row>
                                <p:column>
                                    <h:outputText value="Valor a Pagar"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{tesourariaController.aPagar}" />

                                </p:column>


                            </p:row>	

                            <p:row>
                                <p:column>
                                    <h:outputText value="Valor Pago"></h:outputText>	
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{tesourariaController.tituloselecionado.titulobaixa.valorpago}" ></p:inputText>

                                </p:column>


                            </p:row>	


                        </p:panelGrid>
						
						<center>
	                        <p:commandButton style="font-size: 11px;"
	                          value="Selecionar"
	                          action="#{tesourariaController.addTituloBaixar()}"
	                          update=":frmtitchq:outtit, grwgeral" icon="ui-icon-check" />
	                          
	                           <p:commandButton style="font-size: 11px;"
	                      	    value="Cancelar" icon="ui-icon-close" onclick="PF('dlgliqtitchq').hide();"
	                      	    actionListener="#{tesourariaController.limparDadosTit()}"
	                      	     update=":frmtitchq:outtit, grwgeral"
	                      	     process="@this"/>
                        </center>
            
                    </p:outputPanel>



                    <br />

                </h:form>
            </p:dialog>





            <p:dialog responsive="true"    widgetVar="dlgcomp" header="Compensar Cheque" resizable="false"
                      height="100px" width="250px" modal="true">
                <h:form id="frmcompchq">
                    <h:outputText value="Deseja compensar o Cheque?" />
                    <br/>
                    <br/>
                    <h:outputText value="Data Compensação:"/>
                    <p:calendar value="#{tesourariaController.rowCheque.dtcompensado}" pattern="dd/MM/yyyy" locale="pt" showOn="button"/>
                    <center>
                        <p:commandButton icon="ui-icon-confirm" value="Confirmar"
                                         action="#{tesourariaController.compensaChq}" update=":grwgeral, :frmmov:tabmov:tabComp" />
                        <p:commandButton icon="ui-icon-confirm" value="Cancelar" style="margin-left:10px"
                                         onclick="PF('dlgcomp').hide()" />
                    </center>
                </h:form>
            </p:dialog>


            <p:dialog responsive="true"    widgetVar="dlglancto" header="Lançamento" resizable="false"
                      height="300px" width="450px" modal="true">
                <h:form id="frmlancto">

                    <br/>
                    <br/>
                    <h:outputText value="Valor:"/>
                    <p:inputText value="#{tesourariaController.lancamento.valor}"></p:inputText>
                    <br/>
                    <p:selectOneRadio style="font-size:10px" label="Operação"  value="#{tesourariaController.lancamento.operacao}">
                        <f:selectItem itemLabel="Despesa Bancária" itemValue="DESPBANC"  />
                        <f:selectItem itemLabel="Capital de Giro - Amortização" itemValue="CAPGIRD" />
                        <f:selectItem itemLabel="Capital de Giro - Crédito" itemValue="CAPGIRC" />

                    </p:selectOneRadio>
                    <br/>
                    <h:outputText value="Dados Adicionais"/>
                    <br/>
                    <p:inputTextarea value="#{tesourariaController.lancamento.obs}" cols="50"></p:inputTextarea>

                    <center>
                        <br/>
                        <p:commandButton icon="ui-icon-confirm" value="Confirmar"
                                         action="#{tesourariaController.gravaLancamento}" update=":grwgeral" />
                        <p:commandButton icon="ui-icon-confirm" value="Cancelar" style="margin-left:10px"
                                         onclick="PF('dlgcomp').hide()" />
                    </center>
                </h:form>
            </p:dialog>


        </ui:define>


    </ui:composition>

</html>
